define("tpa",["lodash","utils","santa-components","coreUtils","componentsCore","prop-types","skins","experiment","zepto","reactDOM","warmupUtils","compUtils","santaProps","coreUtilsLib","create-react-class","react","core","layout","pmrpc"],function(e,t,i,n,a,o,s,r,p,c,d,u,l,g,h,f,m,v,y){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1782)}({0:function(t,i){t.exports=e},1:function(e,i){e.exports=t},10:function(e,t){e.exports=p},104:function(e,t,i){var n,a,o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,a=!1,o=void 0;try{for(var s,r=e[Symbol.iterator]();!(n=(s=r.next()).done)&&(i.push(s.value),!t||i.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&r.return&&r.return()}finally{if(a)throw o}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();n=[i(0),i(3),i(55)],void 0===(a=function(e,t,i){"use strict";var n=t.clientSpecMapUtils.getMainSectionWidgetData,a=function(t,i,n){var a=t.getClientSpecMap()[i];if(a){var o=e.find(a.widgets,function(e){return e.appPage&&e.appPage.id===n});if(o)return o.shouldBeStretchedByDefaultMobile||o.appPage.landingPageInMobile||o.appPage.fullPage}return!1};function s(t,i,n){var a=i.widgetsUrlOverride.split(",").map(function(e){return e.split("=")}).map(function(e){var t=o(e,2);return{widgetIdOverride:t[0],urlOverride:t[1]}}).find(function(e){return e.widgetIdOverride===t});if(a)return function(t,i){return e.startsWith(t,i)||e.startsWith(t,"http://localhost")||e.startsWith(t,"https://localhost")}(a.urlOverride,n)?a.urlOverride:void console.error("URL override "+a.urlOverride+" is invalid. please use a URL served from "+n+" or localhost")}return{getAppDataByAppDefinitionId:function(t,i){var n=t.getClientSpecMap();return e.find(n,{appDefinitionId:i})},getMainSectionWidgetData:n,isSuperAppByCompId:function(t,n){var a=i.getAppData(t,n);return e.get(a,"isWixTPA")},isCurrentPageFullResponsive:function(e){return e.isMobileDevice()&&e.isMobileView()&&!!function(e){var t=e.getCurrentUrlPageId(),i=e.getDataByQuery(t);return!!(i&&"Page"===i.type&&i.tpaApplicationId>0)&&a(e,i.tpaApplicationId,i.tpaPageId)}(e)},getWidgetDataByTpaPageId:function(t,i){var n=e.get(t,"widgets");return e.find(n,function(t){return e.get(t,"appPage.id")===i})},isFullPage:function(t,i){if(i){var a=e.get(t,"widgetId"),o=a?e.get(i.widgets,a):n(i);return e.get(o,"appPage.fullPage",!1)}return!1},isFullPageDesktopOnly:function(t,i){if(i){var a=e.get(t,"widgetId"),o=a?e.get(i.widgets,a):n(i);return e.get(o,"componentFields.fullPageDesktopOnly",!1)}return!1},getNativeComponentUrl:function(t,i,n){var a=t.getClientSpecMap(),o=t.getQueryParams(),r=t.serviceTopology.scriptsDomainUrl;if(function(e){return e&&e.widgetsUrlOverride&&e.widgetsUrlOverride.includes("=")}(o)){var p=s(n,o,r);if(p)return p}var c=e.get(a[i].widgets[n],"componentFields.componentUrl");return c?e.endsWith(c,".js")?c:c+".js":null}}}.apply(t,n))||(e.exports=a)},11:function(e,t){e.exports=c},12:function(e,t){e.exports=d},130:function(e,t,i){var n,a;n=[i(10),i(4),i(5),i(0),i(11),i(2),i(15),i(12),i(167),i(233),i(104),i(55),i(325),i(540)],void 0===(a=function(e,t,i,n,a,o,s,r,p,c,d,u,l,g){"use strict";var h=o.santaTypesDefinitions,f=r.tpaWarmup,m={mobile:"unavailableInMobile",https:"unavailableInHttps"},v="notInClientSpecMap",y="unresponsive",I="preloader",S=function(e,t){var i={charCode:e.charCode,keyCode:e.keyCode};this.sendPostMessage({intent:"addEventListener",eventType:t,params:i})},P=function(e){return!e.rootId||n.includes(e.getRootIdsWhichShouldBeRendered(),e.rootId)},A=function(e){var t=e.getClientSpecMapEntry(e.compData.applicationId);return n.includes(p.PERMITTED_FULL_SCREEN_TPAS_IN_MOBILE,n.get(t,"appDefinitionId"))};return{propTypes:{pageStub:h.Component.pageStub,isMobileView:o.santaTypesDefinitions.isMobileView,isViewerMode:o.santaTypesDefinitions.isViewerMode,currentUrl:o.santaTypesDefinitions.currentUrl.isRequired,compData:o.santaTypesDefinitions.Component.compData.isRequired,style:o.santaTypesDefinitions.Component.style.isRequired,id:o.santaTypesDefinitions.Component.id.isRequired,isClientAfterSSR:o.santaTypesDefinitions.isClientAfterSSR,getMemberDetails:o.santaTypesDefinitions.SiteMembersSantaTypes.getMemberDetails.isRequired,windowResizeEvent:o.santaTypesDefinitions.SiteAspects.windowResizeEvent.isRequired,reportBI:o.santaTypesDefinitions.reportBI.isRequired,biData:o.santaTypesDefinitions.biData.isRequired,compProp:o.santaTypesDefinitions.Component.compProp,primaryPageId:o.santaTypesDefinitions.primaryPageId.isRequired,getRootIdsWhichShouldBeRendered:o.santaTypesDefinitions.getRootIdsWhichShouldBeRendered,reportBeatEvent:o.santaTypesDefinitions.reportBeatEvent.isRequired,santaBase:o.santaTypesDefinitions.santaBase.isRequired,getClientSpecMapEntry:o.santaTypesDefinitions.getClientSpecMapEntry.isRequired,dynamicClientSpecMapAspect:o.santaTypesDefinitions.SiteAspects.dynamicClientSpecMapAspect.isRequired,clientSpecMap:o.santaTypesDefinitions.RendererModel.clientSpecMap.isRequired,languageCode:o.santaTypesDefinitions.RendererModel.languageCode,pageId:o.santaTypesDefinitions.Component.pageId,rootId:o.santaTypesDefinitions.Component.rootId,structure:o.santaTypesDefinitions.Component.structure,tpaComponentsDomAspect:o.santaTypesDefinitions.SiteAspects.tpaComponentsDomAspect.isRequired,isHorizontallyDocked:h.Component.isHorizontallyDocked,isTpaRenderedInSsr:o.santaTypesDefinitions.isTpaRenderedInSsr,isExperimentOpen:o.santaTypesDefinitions.isExperimentOpen,getExistingRootNavigationInfo:o.santaTypesDefinitions.getExistingRootNavigationInfo.isRequired,currentUrlPageId:o.santaTypesDefinitions.Component.currentUrlPageId.isRequired,registerTpaComp:o.santaTypesDefinitions.TPA.registerTpaComp},mixins:[t.mixins.createChildComponentMixin,g],ALIVE_TIMEOUT:2e4,OVERLAY_GRACE:5e3,statics:{compSpecificIsDomOnlyOverride:function(){return!1}},getCompMinHeight:function(e){if(this.isUnderMobileView()){var t=e.getClientSpecMapEntry(e.compData.applicationId),i=this.getAppData(),a=this.getWidgetId(i),o=n.get(t,"widgets."+a+".componentFields.minHeightInMobile");return o&&n.isNumber(o)?o:void 0}},onKeyDown:function(e){P(this.props)&&S.call(this,e,"KEY_DOWN")},onKeyUp:function(e){P(this.props)&&S.call(this,e,"KEY_UP")},isUnderMobileView:function(){return this.props.isMobileView},getEcomParams:function(){return"1380b703-ce81-ff05-f115-39571d94dfcd"===this.getAppData().appDefinitionId&&this.props.currentUrl.query["ecom-tpa-params"]},_createOverlayChildComponent:function(e,t,i,a){return a=a||{},this.createChildComponent(n.merge(a,{id:i,style:this.props.style,overlay:t,applicationId:this.props.compData.applicationId,hideOverlayFunc:this._hideOverlay,reloadFunc:this._reload,compData:this.props.compData,languageCode:this.props.languageCode,santaBase:this.props.santaBase,getClientSpecMapEntry:this.props.getClientSpecMapEntry}),e,i,{})},_hideOverlay:function(){this.setState({showOverlay:!1})},_getUnresponsiveText:function(){return this.isUnderMobileView()?"Can't see the content? ":"To view this content, click "},_getReloadext:function(){return this.isUnderMobileView()?"Tap to reload.":"reload."},_createOverlay:function(e){if(!e)return null;switch(e){case I:return this._createOverlayChildComponent("wysiwyg.viewer.components.tpapps.TPAPreloaderOverlay",e,"preloaderOverlay");case y:var t={text:this._getUnresponsiveText(),reload:this._getReloadext()};return this._createOverlayChildComponent("wysiwyg.viewer.components.tpapps.TPAUnavailableMessageOverlay",e,"unavailableMessageOverlay",t);case m.https:return this._createOverlayChildComponent("wysiwyg.viewer.components.tpapps.TPAUnavailableMessageOverlay",e,"unavailableMessageOverlay",{text:"We're sorry, this content cannot be displayed."});case m.mobile:return this._createOverlayChildComponent("wysiwyg.viewer.components.tpapps.TPAUnavailableMessageOverlay",e,"unavailableMessageOverlay",{text:"We're sorry, this content is currently not optimized for mobile view."});case v:return this._createOverlayChildComponent("wysiwyg.viewer.components.tpapps.TPAUnavailableMessageOverlay",e,"unavailableMessageOverlay");default:return null}},_getWidgetName:function(){var e=n.get(this.props.compData,"widgetId"),t=this.getAppData(),i=e?n.get(t.widgets,e):d.getMainSectionWidgetData(t);return n.get(i,"appPage.name")||t.appDefinitionName},getRootStyle:function(e){var t="hidden"===this.state.visibility?{visibility:this.state.visibility}:{},i=this.getCompMinHeight(this.props);return n.assign({minHeight:i?Math.max(i,e.height):e.height,minWidth:e.width},t,e)},getCompRootStyle:function(e){if(e=n.clone(e),this.isUnderMobileView()){if(this.state.isMobileFullScreenMode)return{display:"block"};if(A(this.props))return{display:"none"}}return this.state&&!n.isUndefined(this.state.height)&&(e.height=this.state.height),this.state&&!n.isUndefined(this.state.width)&&(e.width=this.state.width),this.state&&(this.state.isAlive||this.state.overlay===I||this.state.overlay===y||this.state.overlay===m.mobile)&&(this.state.visibility="visible"),this.state.ignoreAnchors?e.zIndex=1001:e.zIndex="",e=this.getRootStyle(e),this.props.isHorizontallyDocked&&(e=n.omit(e,["width","minWidth"])),e},shouldRenderIframe:function(){var e=this.state.overlay,t=!n.includes(m,e),i=this.state.overlay===y,a=t&&!i&&this.isCompInClientSpecMap();return a},allowScrolling:function(){var e=d.isFullPage(this.props.compData,this.getAppData()),t=d.isFullPageDesktopOnly(this.props.compData,this.getAppData())&&!this.props.isMobileView;return e||t?"yes":"no"},_getIframeProperties:function(){if(!this.shouldRenderIframe())return null;var e=this._shouldShowIframe(this.state),t=this.buildUrl(this.getBaseUrl()),i=this._getWidgetName(),a={"data-src":t,key:t,scrolling:this.allowScrolling(),frameBorder:"0",allow:u.getIFramePermissions(),allowtransparency:"true",allowFullScreen:!0,name:this.props.id,style:{display:e?"block":"none",width:"100%",height:"100%",overflow:"hidden",position:"absolute"},title:i,"aria-label":i};return u.isTPASection(this)&&this.isTPASupportedInSSRWarmup()&&this.props.isExperimentOpen("sv_ssrBufferEvents")&&(n.unset(a,"data-src"),a.src=t),a},getSkinProperties:function(){var e=this._createOverlay(this.state.overlay),t=this._getIframeProperties(),i={"":{style:this.getCompRootStyle(this.props.style),"data-ignore-anchors":this.state.ignoreAnchors},overlay:this.state.showOverlay&&this.isNotWorker()?e:null,iframe:t||"remove"};return this.checkIfNeedToSendMemberData(),this.mutateSkinProperties&&(i=this.mutateSkinProperties(i)),i},_reload:function(){var e=this;this._clearAliveTimeout(),clearTimeout(this.showOverlyIntervalId),this.showOverlyIntervalId=setTimeout(function(){e._showOverlayIfNeeded()},this.OVERLAY_GRACE),this._appAliveTimeout=setTimeout(this._onAppAliveTimeoutExpires,this.ALIVE_TIMEOUT);var t=this.getAppData();this.props.reportBI(l.RELOAD_TPA_CLICK,{appDefinitionId:n.get(t,"appDefinitionId"),appName:n.get(t,"appDefinitionName")}),this.registerReLayout(),this.setState(this.getInitialState())},checkIfNeedToSendMemberData:function(){var e=this.state.shouldGetSiteMemberDetails;if(e){var t=this.props.getMemberDetails();t&&e.callback({authResponse:!0,data:t})}},isTPASupportedInSSRWarmup:function(){var e=this.getAppData();return this.props.isExperimentOpen("sv_ssrLoadTpa")&&f.isTpaSupported(e,this.getWidgetId(e),this.props.isExperimentOpen,null)},getInitialState:function(){var e=void 0;this.isNotWorker()||(e={widgetName:"worker"}),this.reportPerformanceBiEvent(f.events.APP_IFRAME_START_LOADING,e),this.urlState="";var t={visibility:"hidden",overlay:this.isUnderMobileView()&&this.isMobileReady&&!this.isMobileReady()?m.mobile:null,isAlive:!1,registeredEvents:[],showOverlay:!0,initialWidth:this.props.style.width,initialHeight:this.props.style.height,initialInstance:this.props.dynamicClientSpecMapAspect.getAppInstance(this.props.compData.applicationId)||this.getAppData(this).instance,initialRouterData:n.get(this.props.getExistingRootNavigationInfo(this.props.currentUrlPageId),"routerPublicData")};return this.isTPASupportedInSSRWarmup()&&n.assign(t,{visibility:"visible",isAlive:!0}),this.shouldUpdateInitialRouterData=!0,this.mutateInitialState&&(t=this.mutateInitialState(t)),t},isCompInClientSpecMap:function(){var e=n.get(this.props,"clientSpecMap"),t=n.get(this.props,"compData.applicationId");return!(!e||!t)&&!!n.get(e,t)},_showOverlayIfNeeded:function(){var e=this.isCompInClientSpecMap(),t=n.get(this.props,"isViewerMode");this.state&&!1===this.state.isAlive&&(!this.state.overlay&&e||!e&&!t)&&this._isMounted&&this.setState({overlay:this._getInitialOverlay(),visibility:"visible"})},_shouldShowIframe:function(e){return!n.get(this.props,"compProp.isHidden")&&(!e.overlay||"preloader"===e.overlay)},_getInitialOverlay:function(){return this.isMobileReady&&this.isUnderMobileView()&&!this.isMobileReady()?m.mobile:this.isCompInClientSpecMap()?I:v},componentSpecificShouldUpdate:function(e){return!e.pageStub},componentWillReceiveProps:function(e){var t=n.get(this.props.getExistingRootNavigationInfo(e.currentUrlPageId),"routerPublicData");"masterPage"!==this.props.rootId||!this.shouldUpdateInitialRouterData||n.isUndefined(t)||n.isEqual(this.state.initialRouterData,t)||(this.setState({initialRouterData:t}),this.shouldUpdateInitialRouterData=!1),this.resize&&this.resize(e);var i=n.get(this.props.clientSpecMap,[this.props.compData.applicationId,"instance"]),a=n.get(e.clientSpecMap,[this.props.compData.applicationId,"instance"]);i!==a&&this.setState({initialInstance:a})},componentWillMount:function(){this.props.windowResizeEvent.registerToResize(this),this.props.registerTpaComp(this)},componentDidMount:function(){var e=this;this._isMounted=!0;var t=this.state.overlay;this.isNotWorker()&&(this.showOverlyIntervalId=setTimeout(function(){e._showOverlayIfNeeded()},this.OVERLAY_GRACE),this.props.isViewerMode||this.setOverlayState&&this.setOverlayState()),this.state.isAlive||n.includes(m,t)||!this.isNotWorker()||(this._appAliveTimeout=setTimeout(this._onAppAliveTimeoutExpires,this.ALIVE_TIMEOUT),u.incAppCounter())},isNotWorker:function(){return!this.isTPAWorker||!this.isTPAWorker()},_onAppAliveTimeoutExpires:function(){this.showUnresponsiveOverlay()},showUnresponsiveOverlay:function(){this._isMounted&&!this.state.isAlive&&this.isCompInClientSpecMap()&&this.setState({overlay:y,visibility:"visible"},function(){this.reportBIAppNotResponsive()}.bind(this))},reportBIAppNotResponsive:function(){var e=this.props.compData.widgetId,t=this.getAppData(),i=e?n.get(t.widgets,e):d.getMainSectionWidgetData(t),a=this.props.biData,o={endpoint:n.get(i,"widgetUrl"),app_id:n.get(t,"appDefinitionId"),pageNo:a.getPageNumber(),totalLoadingTime:a.getTime().totalLoadingTime};this.props.reportBI(c.APP_IS_NOT_RESPONSIVE,o)},componentWillUnmount:function(){this._isMounted=!1,this._clearAliveTimeout(),clearTimeout(this.showOverlyIntervalId)},_clearAliveTimeout:function(){this._appAliveTimeout&&(window.clearTimeout(this._appAliveTimeout),this._appAliveTimeout=0,this.props&&u.decAppCounter(this.props.reportBeatEvent,this.props.primaryPageId))},setAppIsAlive:function(e){this.reportPerformanceBiEvent(f.events.APP_SDK_START_LOADING),this._clearAliveTimeout(),this.setState({isAlive:!0,overlay:this.state.overlay===I?null:this.state.overlay},function(){this.props.tpaComponentsDomAspect.markComponentIsAlive(this.props.id),e&&e()})},_isUrlSecure:function(e){return/^https/.test(e)},getWidgetId:function(e){var t=n.get(this.props,"compData.widgetId");if(!t){var i=d.getMainSectionWidgetData(e);t=n.get(i,"widgetId")}return t},reportPerformanceBiEvent:function(e,t){if(!this.props.isClientAfterSSR||!this.props.isTpaRenderedInSsr){var i=this.getAppData(),n=this.getWidgetId(i);f.reportPerformanceBiEvent(e,this.props.reportBI,this.props.biData,this.props.id,this.props.isTpaRenderedInSsr,i,n,t)}},enterFullScreen:function(e){A(this.props)&&this.setState({isMobileFullScreenMode:!0},e)},exitFullScreen:function(e){this.setState({isMobileFullScreenMode:!1},e)}}}.apply(t,n))||(e.exports=a)},131:function(e,t,i){var n,a;n=[i(0)],void 0===(a=function(e){"use strict";var t=/^[0-9]+%$/;function i(i){return e.isNumber(i)&&i>=0||function(e){return t.test(e)}(i)}return{resizeWindow:function(e,t,n){var a=!1,o={};i(t)&&t!==this.state.height&&(o.height=t,a=!0),i(e)&&e!==this.state.width&&(o.width=e,a=!0),a&&(this.registerReLayout(),this.setState(o,n))}}}.apply(t,n))||(e.exports=a)},14:function(e,t){e.exports=u},15:function(e,t){e.exports=l},167:function(e,t,i){var n,a;n=[i(55)],void 0===(a=function(e){"use strict";var t,i,n,a="14517e1a-3ff0-af98-408e-2bd6953c36a2";return{PERF_CATEGORY:{category:"tpa"},PERMITTED_GLUED_TPAS_IN_MOBILE:[a],PERMITTED_FULL_SCREEN_TPAS_IN_MOBILE:[a],NATIVE_COMPONENT_WIDGETS_EXPERIMENT_MAP:(t={},i=e.Constants.ECOM.CART_ICON_WIDGET_ID,n="sv_nativeCartIcon",i in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t)}}.apply(t,n))||(e.exports=a)},1782:function(e,t,i){var n,a;n=[i(1783),i(1786),i(1788),i(1789),i(1790),i(1791),i(90),i(77),i(1792),i(1795),i(1796),i(545),i(329),i(548),i(130),i(550),i(551),i(541),i(326),i(1),i(55),i(546),i(549),i(552),i(555),i(328),i(167),i(6),i(556),i(1800),i(543)],void 0===(a=function(e,t,i,n,a,o,s,r,p,c,d,u,l,g,h,f,m,v,y,I,S,P,A,T,D,C,w,E,b,_,M){"use strict";return E.skinsMap.addBatch(b),{tpaWidgetNative:t,nativeCompRequireService:M,widget:e,section:i,multiSection:n,worker:a,gluedWidget:o,gluedWidgetMeasuringUtils:P,tpaMixins:{tpaUrlBuilder:s,tpaCompApi:r,tpaCompBase:h},GluedWidgetPatcher:u,tpaMeasurer:l,tpaSectionPatcher:g,tpaHandlers:m,common:{metaData:w,tpaPostMessageCommon:f,TPAUrlBuilder:v,styleUtils:I.styleUtils,TPABaseUrlBuilder:y,utils:S,bi:D},services:{tpaPreviewEditorCommunicationService:A,tpaNavigationService:T},tpaStyleUtils:I.styleUtils,sitePages:C}}.apply(t,n))||(e.exports=a)},1783:function(e,t,i){var n,a;n=[i(0),i(4),i(2),i(18),i(130),i(90),i(77),i(542),i(131)],void 0===(a=function(e,t,i,n,a,o,s,r,p){"use strict";var c=t.compRegistrar,d={displayName:"TPAWidget",propTypes:{structure:i.santaTypesDefinitions.Component.structure.isRequired},mixins:[t.mixins.skinBasedComp,n.timersMixins.timeoutsMixin,a,o,s,r,p],mutateIframeUrlQueryParam:function(t){t.width=this.state.initialWidth;var i=this.props.structure.originCompId;return i&&!e.isEmpty(i)&&(t.originCompId=i),t}};return c.register("wysiwyg.viewer.components.tpapps.TPAWidget",d),d}.apply(t,n))||(e.exports=a)},1784:function(e){e.exports={SDK_SET_HEIGHT_ERROR:{errorCode:190,desc:"sdk - set height with a big number",severity:"error",params:{p1:"height"}},SDK_PUBSUB_PUBLISH_ERROR:{errorCode:191,desc:"sdk - pubSub: publish error. App not installed on site - cannot find appDefId",severity:"error"},SDK_NAVIGATION_TO_SECTION_ERROR:{errorCode:192,desc:"sdk - navigate to section failed",severity:"error",params:{p1:"appDefinitionName",p2:"sectionId"}},ECOM_MISSING_PAGES:{errorCode:300,desc:"missing ecom pages",severity:"error"},APP_IS_NOT_RESPONSIVE:{errorCode:302,desc:"monitoring apps that are down",severity:"error",params:{p1:"endpoint",p2:"app_id",p3:"pageNo",p4:"totalLoadingTime"}}}},1785:function(e){e.exports={JS_SDK_FUNCTION_CALL:{eventId:12,adapter:"sdk",src:11,sampleRatio:1e3,params:{visitor_id:"visitorUuid",ver:"sdkVersion",origin:"origin",function_name:"fnName",namespace:"namespace",app_id:"appId",instance_id:"instanceId",is_published:"isPublished",count:"count",param:"param"}},GALLERY_FUNCTION_CALL:{eventId:11,adapter:"sdk",src:11,params:{visitor_id:"visitorUuid",sdk_ver:"sdkVersion",origin:"origin",function_name:"fnName",namespace:"namespace",count:"count"}},APP_STATE_CHANGED:{eventId:646,src:42,params:{widget_id:"widgetId",instance_id:"compId",appId:"appDefinitionId",loading_time:"loadingTime",pid:"pageId",pn:"pageNo",tts:"totalLoadingTime",external_app_id:"externalAppDefinitionId",external_widget_id:"externalWidgetId"}},RELOAD_TPA_CLICK:{eventId:321,src:42,params:{app_id:"appDefinitionId",appName:"appName"}},APP_IS_ALIVE_ERROR:{eventId:405,src:42,params:["app_id","errorMessage"]}}},1786:function(e,t,i){var n,a;function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}n=[i(0),i(5),i(15),i(4),i(2),i(1787),i(20)],void 0===(a=function(e,t,i,n,a,s,r){"use strict";var p=n.compRegistrar,c=a.santaTypesDefinitions,d=a.utils.createReactElement,u={ReactComponent:c.NativeComponentSantaTypes.getComponent,getStyleData:c.Component.getStyleData,themeData:c.Theme.THEME_DATA,scriptsLocationMap:c.ServiceTopology.scriptsLocationMap,styleData:c.NativeComponentSantaTypes.widgetStyle,structure:a.santaTypesDefinitions.Component.structure.isRequired,layout:c.Component.layout,getClientSpecMapEntry:a.santaTypesDefinitions.getClientSpecMapEntry,compData:c.Component.compData,viewMode:c.NativeComponentSantaTypes.viewMode},l={ReactComponent:c.NativeComponentSantaTypes.getComponent,id:a.santaTypesDefinitions.Component.id,structure:a.santaTypesDefinitions.Component.structure,style:c.Component.style,widgetStyle:c.NativeComponentSantaTypes.widgetStyle,styleId:c.Component.styleId,compActions:c.Component.compActions,compData:c.Component.compData,handleAction:c.Behaviors.handleAction,formFactor:c.NativeComponentSantaTypes.formFactor,viewMode:c.NativeComponentSantaTypes.viewMode,defaultContentArea:c.Container.defaultContentArea,getStyleData:c.Component.getStyleData,getClientSpecMapEntry:a.santaTypesDefinitions.getClientSpecMapEntry,appLoadBI:c.NativeComponentSantaTypes.appLoadBI,isInSSR:a.santaTypesDefinitions.isInSSR,skin:i.Types.staticValue(t.string,"wysiwyg.viewer.skins.TPAWidgetNativeSkin"),loadFonts:c.NativeComponentSantaTypes.loadFonts};function g(t,i){var n=i.styleData,a=i.layout,s=i.ReactComponent,r=i.styleId;return e.get(s,"css")&&e.isFunction(s.css)?o({},r,s.css({styleId:r,styleData:n,layout:a})):o({},r,"")}function h(t,i){return e.reduce(t,function(t,n,a){var o=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return i(n,{payload:JSON.stringify(t)})};return function(t){return e.includes(t,".")}(a)?e.set(t,a,o):(t[a]=o,t)},{})}g.cssTypes=u;var f=r({mixins:[n.mixins.customSkinBasedComp({customCssFunc:g})],propTypes:l,getCompProps:function(){var t=e.get(this.props,"compData.wixCodeProps"),i=h(this.props.compActions,this.props.handleAction),n={style:this.props.widgetStyle,id:this.props.id,viewMode:this.props.viewMode,formFactor:this.props.formFactor,dimensions:this.props.style,appLoadBI:this.props.appLoadBI,loadFonts:this.props.loadFonts};return e.merge(n,t,i)},getRootProperties:function(e){return{style:{height:"auto",minHeight:this.props.structure.layout.height},"data-min-height":this.props.structure.layout.height,children:d(e,this.getCompProps())}},getDeadCompProperties:function(){return this.props.isInSSR?{children:null}:{children:"To view this content, Reload the page",style:{textAlign:"center",backgroundColor:"#fff",fontSize:"14px"}}},getSkinProperties:function(){var e=this.props.ReactComponent;return{"":e?this.getRootProperties(e):this.getDeadCompProperties()}}});return p.register("wysiwyg.viewer.components.tpapps.TPAWidgetNative",f),n.dataRequirementsCheckerRegistrar.registerCheckerForCompType("wysiwyg.viewer.components.tpapps.TPAWidgetNative",s.requireAndRegisterComponent),f}.apply(t,n))||(e.exports=a)},1787:function(e,t,i){var n,a;n=[i(0),i(543),i(104)],void 0===(a=function(e,t,i){"use strict";return{requireAndRegisterComponent:function(n,a){var o=n.nativeComponentRegistrar,s=a.data,r=s.widgetId,p=s.applicationId;if(o.isRegistered(r))return[];var c=i.getNativeComponentUrl(n,p,r);if(!c)return[];var d={customDownload:function(){var i=d.done;t.requireComponentFromUrl(c).then(function(t){var n=e.get(t,"default.component",!1);n?o.register({widgetId:r,component:n}):o.register({widgetId:r,error:!0}),i()}).catch(function(){o.register({widgetId:r,error:!0}),i()})}};return[d]}}}.apply(t,n))||(e.exports=a)},1788:function(e,t,i){var n,a;n=[i(0),i(4),i(2),i(18),i(130),i(90),i(77),i(544),i(131)],void 0===(a=function(e,t,i,n,a,o,s,r,p){"use strict";var c=t.compRegistrar,d={displayName:"TPASection",propTypes:{compData:i.santaTypesDefinitions.Component.compData.isRequired},mixins:[t.mixins.skinBasedComp,n.timersMixins.timeoutsMixin,a,o,s,r,p],getBaseUrl:function(){var t=this.getAppData(),i=this.props.compData.widgetId,n=t.sectionUrl,a=t.sectionDefaultPage,o=this.props.compData.type,s=this.isUnderMobileView()&&this.isMobileReady();if("TPAWidget"===o&&i){var r=e.find(t.widgets,{widgetId:i});r&&(a=r.appPage.defaultPage,n=s?r.mobileUrl:r.widgetUrl)}else s&&(n=t.sectionMobileUrl);return a&&!e.isEmpty(a)&&("/"!==n.slice(-1)&&(n+="/"),n+=a),n}};return c.register("wysiwyg.viewer.components.tpapps.TPASection",d),d}.apply(t,n))||(e.exports=a)},1789:function(e,t,i){var n,a;n=[i(0),i(2),i(18),i(130),i(90),i(77),i(544),i(131),i(4)],void 0===(a=function(e,t,i,n,a,o,s,r,p){"use strict";var c=p.compRegistrar,d={displayName:"TPAMultiSection",propTypes:{compData:t.santaTypesDefinitions.Component.compData.isRequired},mixins:[p.mixins.skinBasedComp,i.timersMixins.timeoutsMixin,n,a,o,s,r],getBaseUrl:function(){var t=this.getAppData(),i=t.sectionUrl,n=t.widgets[this.props.compData.widgetId],a=t.sectionDefaultPage;return n&&(i=this.isUnderMobileView()&&this.isMobileReady()?n.mobileUrl:n.widgetUrl,a=n.appPage.defaultPage),a&&!e.isEmpty(a)&&("/"!==i.slice(-1)&&(i+="/"),i+=a),i}};return c.register("wysiwyg.viewer.components.tpapps.TPAMultiSection",d),d}.apply(t,n))||(e.exports=a)},1790:function(e,t,i){var n,a;n=[i(130),i(90),i(77),i(4)],void 0===(a=function(e,t,i,n){"use strict";var a=n.compRegistrar,o={displayName:"TPAWorker",mixins:[n.mixins.skinBasedComp,e,t,i],getBaseUrl:function(){return this.getAppData().appWorkerUrl},mutateIframeUrlQueryParam:function(e){return e.endpointType="worker",e},mutateSkinProperties:function(e){return e.iframe&&e.iframe.style&&(e.iframe.style.display="none"),e},isTPAWorker:function(){return!0}};a.register("tpa.viewer.classes.TPAWorker",o)}.apply(t,n))||(e.exports=a)},1791:function(e,t,i){var n,a;n=[i(18),i(4),i(15),i(2),i(130),i(90),i(77),i(542),i(131)],void 0===(a=function(e,t,i,n,a,o,s,r,p){"use strict";var c=t.compRegistrar,d={displayName:"TPAGluedWidget",statics:{behaviors:{notifyWidget:{methodName:"notifyWidgetInternal",params:["action"]}}},mixins:[t.mixins.skinBasedComp,e.timersMixins.timeoutsMixin,a,o,s,r,p],mutateIframeUrlQueryParam:function(e){return e.width=this.state.initialWidth,e},mutateSkinProperties:function(e){return e[""]["data-has-ads"]=this.props.shouldShowWixAds,e},notifyWidgetInternal:function(e){this.sendPostMessage({intent:"addEventListener",eventType:"QUICK_ACTION_TRIGGERED",params:{quickAction:e}})}};return c.register("wysiwyg.viewer.components.tpapps.TPAGluedWidget",d),d}.apply(t,n))||(e.exports=a)},1792:function(e,t,i){var n,a;n=[i(31),i(545),i(1793),i(548),i(329),i(547),i(1794),i(3)],void 0===(a=function(e,t,i,n,a,o,s,r){"use strict";var p=new t(o),c=new i;return e.registerCustomMeasure("wysiwyg.viewer.components.tpapps.TPAWidget",a.measureTPA),e.registerCustomMeasure("wysiwyg.viewer.components.tpapps.TPASection",a.measureTPA),e.registerCustomMeasure("wysiwyg.viewer.components.tpapps.TPAMultiSection",a.measureTPA),e.registerCustomMeasure("wysiwyg.viewer.components.tpapps.TPAGluedWidget",c.measureGluedWidget),e.registerRequestToMeasureDom("wysiwyg.viewer.components.tpapps.TPAWidget"),e.registerRequestToMeasureDom("wysiwyg.viewer.components.tpapps.TPAGluedWidget"),e.registerRequestToMeasureDom("wysiwyg.viewer.components.tpapps.TPASection"),e.registerRequestToMeasureDom("wysiwyg.viewer.components.tpapps.TPAMultiSection"),e.registerRequestToMeasureChildren("wysiwyg.viewer.components.tpapps.TPASection",[["iframe"]]),e.registerRequestToMeasureChildren("wysiwyg.viewer.components.tpapps.TPAMultiSection",[["iframe"]]),e.registerRequestToMeasureChildren("wysiwyg.viewer.components.tpapps.TPAWidget",[["iframe"]]),e.registerPatcher("wysiwyg.viewer.components.tpapps.TPAGluedWidget",p.patchGluedWidget),e.registerPatcher("wysiwyg.viewer.components.tpapps.TPAMultiSection",n.patchTPASection),e.registerPatcher("wysiwyg.viewer.components.tpapps.TPASection",n.patchTPASection),e.registerPatcher("wysiwyg.viewer.components.tpapps.TPAWidget",function(e,t,i,n,a){s.patchWidth(e,t,i,n,a),r.layoutUtils.getLayoutMechanism(a)===r.constants.LAYOUT_MECHANISMS.MESH&&t.css(e,{height:i.height[e]+"px"})}),["wysiwyg.viewer.components.WixAdsMobile","wysiwyg.viewer.components.WixAdsDesktop"].forEach(function(t){e.registerRequestToMeasureChildren(t,[["desktopWADTop"],["desktopWADBottom"],["mobileWADTop"]])}),{}}.apply(t,n))||(e.exports=a)},1793:function(e,t,i){var n,a;n=[i(0),i(10),i(329),i(546)],void 0===(a=function(e,t,i,n){"use strict";return function(){this.measureGluedWidget=function(a,o,s,r,p){var c=p.getClientSpecMap,d=p.isMobileView,u=r.propertiesItem,l=r.dataItem,g=e.assign(r.layout,{height:t(s[a]).height(),width:t(s[a]).width()}),h=o.width.screen,f=o.height.screen,m={props:u,data:l,layout:g},v=n.getGluedWidgetMeasurements(c(),m,h,f,o.siteMarginBottom,d());(v=function(e){return 0===e.right&&(e.left="auto"),0===e.bottom&&(e.top="auto"),0===e.left&&(e.right="auto"),0===e.top&&(e.bottom="auto"),e}(v)).fixedTop=v.top,v.fixedLeft=v.left,delete v.top,delete v.left,e.forEach(v,function(e,t){o[t]=o[t]||{},o[t][a]=e}),e.set(o.custom,[a,"has-ads"],Boolean(t(s[a]).data("has-ads"))),o.width[a]=g.width,i.measureTPA(a,o,s)}.bind(this)}}.apply(t,n))||(e.exports=a)},1794:function(e,t,i){var n;void 0===(n=function(){"use strict";return{patchWidth:function(e,t,i,n,a){a.os.ios&&a.browser.safari&&i.custom[e].hasIframe&&t.css(e+"iframe",{width:1,minWidth:"100%"})}}}.apply(t,[]))||(e.exports=n)},1795:function(e,t,i){var n,a;n=[i(4)],void 0===(a=function(e){"use strict";var t=e.compRegistrar,i={mixins:[e.mixins.skinBasedComp],getSkinProperties:function(){return{preloader:{className:"circle-preloader"}}}};t.register("wysiwyg.viewer.components.tpapps.TPAPreloaderOverlay",i)}.apply(t,n))||(e.exports=a)},1796:function(e,t,i){var n,a;n=[i(2),i(21),i(15),i(1797),i(4)],void 0===(a=function(e,t,i,n,a){"use strict";var o=a.compRegistrar,s=Object.freeze({displayName:"TPAUnavailableMessageOverlay",mixins:[a.mixins.skinBasedComp,n],propTypes:{compData:e.santaTypesDefinitions.Component.compData.isRequired},getInitialState:function(){return{showOverlay:!0}},getSkinProperties:function(){return{text:{children:[this.props.compData.text]},dismissButton:{onClick:this.props.compData.hideOverlayFunc},reloadButton:{children:[this.props.compData.reload],onClick:this.props.compData.reloadFunc},openHelp:this.openHelp}}});o.register("wysiwyg.viewer.components.tpapps.TPAUnavailableMessageOverlay",s)}.apply(t,n))||(e.exports=a)},1797:function(e,t,i){var n,a;n=[i(549)],void 0===(a=function(e){"use strict";return{openHelp:function(t){e.doPostMessage("openHelp",t)}}}.apply(t,n))||(e.exports=a)},1798:function(e,t,i){var n,a;n=[i(12)],void 0===(a=function(e){"use strict";var t=e.tpaWarmup,i=function(e,i,n){if(e&&e.reportPerformanceBiEvent){var a=e.getAppData(),o=e.getWidgetId(a);t.reportPerformanceBiEvent(i,e.props.reportBI,e.props.biData,e.props.id,e.props.isTpaRenderedInSsr,a,o,n)}};return{applicationLoaded:function(e,n){var a=e.getComponentById(n.compId);i(a,t.events.APP_LOADED_SUCCESSFULLY)},applicationLoadingStep:function(e,n){var a=e.getComponentById(n.compId),o={stage:n.data.stage,stageNum:n.data.stageNum};i(a,t.events.APP_LOADED_PARTIALLY,o)}}}.apply(t,n))||(e.exports=a)},1799:function(e,t,i){var n,a;n=[i(55),i(167),i(3)],void 0===(a=function(e,t,i){"use strict";var n=function(){};return{toWixDate:n,getCompId:n,getOrigCompId:n,getWidth:n,getLocale:n,getCacheKiller:n,getTarget:n,getInstanceId:n,getSignDate:n,getUid:n,getPermissions:n,getIpAndPort:n,getDemoMode:n,getDeviceType:n,getInstanceValue:n,getSiteOwnerId:n,getImageUrl:n,getResizedImageUrl:n,getAudioUrl:n,getDocumentUrl:n,getSwfUrl:n,getPreviewSecureMusicUrl:n,getStyleParams:function(n,a){var o=e.getAppDefId(n,a.compId);i.loggingUtils.performance.start("getStyleParams "+o,t.PERF_CATEGORY)},getStyleColorByKey:n,getColorByreference:n,getEditorFonts:n,getSiteTextPresets:n,getFontsSpriteUrl:n,getStyleFontByKey:n,getStyleFontByReference:n,getSiteColors:n,setUILIBParamValue:n,tpaWorker:{getViewMode:n,getDeviceType:n,getLocale:n,getInstanceId:n,getIpAndPort:n}}}.apply(t,n))||(e.exports=a)},18:function(e,t){e.exports=g},1800:function(e,t,i){var n,a;n=[i(4),i(1801),i(1802),i(1804),i(1806),i(1808),i(1809),i(1811),i(1812),i(1813),i(1814),i(1815),i(1816)],void 0===(a=function(e,t,i,n,a,o,s,r,p,c,d,u,l){"use strict";var g=e.siteAspectsRegistry;g.registerSiteAspect("tpaWorkerAspect",t),g.registerSiteAspect("tpaPostMessageAspect",i),g.registerSiteAspect("tpaPopupAspect",n),g.registerSiteAspect("tpaPubSubAspect",a),g.registerSiteAspect("tpaPixelTrackerAspect",o),g.registerSiteAspect("tpaModalAspect",s),g.registerSiteAspect("tpaMobileViewportAspect",r),g.registerSiteAspect("tpaCompStateAspect",p),g.registerSiteAspect("tpaComponentsDomAspect",c),g.registerSiteAspect("tpaPageNavigationAspect",d),g.registerSiteAspect("TPARPCAspect",u),g.registerSiteAspect("nativeSantaTypesAspect",l)}.apply(t,n))||(e.exports=a)},1801:function(e,t,i){var n,a;n=[i(0)],void 0===(a=function(e){"use strict";function t(e){this._aspectSiteAPI=e}return t.prototype={getComponentsToRender:function(){var t=this._aspectSiteAPI.getSiteData().getClientSpecMap(),i=this.getTPAWorkers(t);return e.map(i,function(e){var t,i="tpaWorker_"+e.applicationId;return{structure:(t=i,{componentType:"tpa.viewer.classes.TPAWorker",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",type:"Component",id:t}),props:{compData:e}}})},getTPAWorkers:function(t){return e.filter(t,function(t){return e.isString(t.appWorkerUrl)&&t.permissions&&!t.permissions.revoked})}},t}.apply(t,n))||(e.exports=a)},1802:function(e,t,i){var n,a;n=[i(0),i(550),i(551),i(1803),i(554),i(55),i(555),i(104),i(77),i(234),i(66),i(1)],void 0===(a=function(e,t,i,n,a,o,s,r,p,c,d,u){"use strict";var l={getCtToken:!0,refreshCurrentMember:!0};var g=function(t){if(e.has(t,"data")&&!e.isNull(t.data))return t.data.eventKey&&u.stringUtils.startsWith(t.data.eventKey,o.Constants.TPA_PUB_SUB_PREFIX)},h=function(e){return g(e)?n:(t=e.compId)&&u.stringUtils.startsWith(t,"tpaWorker_")?i.tpaWorker:i;var t},f=function(i,n,a){if(function(t,i,n){var a=i&&t.getComponentById(i);return("appStateChanged"!==n||a&&e.includes(t.getAllRenderedRootIds(),a.props.rootId))&&function(e,t,i){return!l[i]||r.isSuperAppByCompId(e,t)}(t,i,n)}(i,n.compId,n.type)&&!function(e,t,i){if(!t.compId)return!1;if(e.getComponentById(t.compId))return!1;return e.getSiteAspect("tpaPostMessageAspect").queueMessage({msg:t,response:i}),!0}(i,n,a)){var p=t.fixOldPingPongMessageType(n.type),d=h(n);if(d[p]&&(d[p].call(this,i,n,a),function(t,i){if("registerEventListener"===i.type&&!g(i))return e.includes(c,i.data.eventKey);return!0}(0,n))){var u=i.getComponentById(n.compId);s.sendBIEvent(n,n.origin||"viewer",e.get(u,"props.compData"),o.getClientSpecMap(i),i.reportBI)}}},m=function(t){return function t(i,n){return e.isFunction(i)?e.partial(i,n):e.isObject(i)?e.mapValues(i,function(e){return t(e,n)}):i}({openModal:a.openModal,openPopup:a.openPopup},t)};var v=function(t){var i=this;e.bindAll(this,e.functionsIn(this)),t.registerToMessage(this.handleTPAMessage),t.getSiteData().isInSSR()||t.getSiteData().isAddPanelView||d.api.set("tpaHandlers",m(t)),this._siteAPI=t,this._messageQueue=[],t.registerToOnFullyRendered(function(){e.forEach(i._messageQueue,function(e){var t=e.msg,n=e.response;f(i._siteAPI,t,n)}),i._messageQueue.length=0})};return v.prototype={handleTPAMessage:function(e){t.handleTPAMessage.call(this,void 0,this._siteAPI,f,e)},sendPostMessage:function(e,i){var n=e.getIframe();if(n)t.callPostMessage(n,i);else if(this._siteAPI.getSiteData().isDebugMode())throw new Error("No iframe found in TPA component",e)},queueMessage:function(e){this._messageQueue.push(e)},callHandler:f},v}.apply(t,n))||(e.exports=a)},1803:function(e,t,i){var n,a;n=[i(55),i(1),i(233)],void 0===(a=function(e,t,i){"use strict";var n=t.logger;return{registerEventListener:function(e,t){e.getSiteAspect("tpaPubSubAspect").subscribe(t)},publish:function(t,a){var o=a.data,s=a.compId,r=e.getAppDefId(t,s);r?(o.eventKey=e.stripPubSubPrefix(o.eventKey),t.getSiteAspect("tpaPubSubAspect").publish(r,s,o)):n.reportBI(t.getSiteData(),i.SDK_PUBSUB_PUBLISH_ERROR)},removeEventListener:function(t,i){var n=i.compId,a=i.data,o=e.getAppDefId(t,n),s=e.stripPubSubPrefix(a.eventKey);t.getSiteAspect("tpaPubSubAspect").unsubscribe(o,n,s)}}}.apply(t,n))||(e.exports=a)},1804:function(e,t,i){var n,a;n=[i(0),i(1),i(1805)],void 0===(a=function(e,t){"use strict";var i="tpaPopupAspect";function n(e){return e.getAspectGlobalData(i)}function a(t){return t&&e.isArray(t)&&t.length>0}function o(t){this.aspectSiteApi=t,e.bindAll(this,e.functionsIn(this)),this.aspectSiteApi.registerToUrlPageChange(this.removeAllPopups)}return o.prototype={getComponentsToRender:function(){var t=n(this.aspectSiteApi);return a(t)?e.map(t,function(e){return{structure:e.structure,props:{compData:e.popupData,onCloseCallback:e.popupOnClose}}}):null},showPopup:function(e,o){var s={structure:{componentType:"wysiwyg.viewer.components.tpapps.TPAPopup",type:"Component",id:t.guidUtils.getUniqueId(),skin:"wysiwyg.viewer.skins.TPAPopupSkin",styleId:""},popupData:e,popupOnClose:o},r=n(this.aspectSiteApi);a(r)||(r=[]),r.push(s),this.aspectSiteApi.setAspectGlobalData(i,r),this.aspectSiteApi.forceUpdate()},removePopup:function(t){var o=t.props.id,s=n(this.aspectSiteApi);a(s)&&(s=e.reject(s,{structure:{id:o}}),this.aspectSiteApi.setAspectGlobalData(i,s),this.aspectSiteApi.forceUpdate())},removeAllPopups:function(){var t=n(this.aspectSiteApi);a(t)&&(this.aspectSiteApi.setAspectGlobalData(i,function(t){return e.filter(t,{popupData:{persistent:!0}})}(t)),this.aspectSiteApi.forceUpdate())}},o}.apply(t,n))||(e.exports=a)},1805:function(e,t,i){var n,a;n=[i(2),i(0),i(5),i(4),i(1),i(14),i(15),i(90),i(77),i(540),i(557),i(131),i(55)],void 0===(a=function(e,t,i,n,a,o,s,r,p,c,d,u,l){"use strict";var g=n.compRegistrar,h=function(e){return t.parseInt((e||"").toString().split("px")[0])},f="FIXED",m="ABSOLUTE",v="RELATIVE",y="DEFAULT",I="BOTTOM_CENTER",S="BOTTOM_LEFT",P="BOTTOM_RIGHT",A="CENTER",T="CENTER_LEFT",D="CENTER_RIGHT",C="TOP_CENTER",w="TOP_LEFT",E="TOP_RIGHT",b=function(e,t,i){return e+t/2-i/2},_=function(e,t,i){return e-(t+i)},M=function(e,t,i){return e-(t+i)},R=function(e,t,i){return e+t/2-i/2},O=function(e){var i=0,n="";if(t.isNumber(e))i=e;else if(t.isString(e)){var a=/(%)$/.exec(e),o=function(e){return/^([0-9]+)/.exec(e)}(e);i=o&&o[1]?parseInt(o[1],10):0,a&&a[1]&&(n=a[1])}return{size:i,unit:n}},x=function(e,i,n,a,o){var s={};return e.origin!==y&&e.origin!==f||(s=function(e,i,n,a){var o={position:"fixed",display:"block",width:n,height:a};return"%"===(a=O(a)).unit?a.size=t.min([a.size,100]):a.size>i.height&&(a.unit="%",a.size=100),(n=O(n)).size="%"===n.unit?t.min([n.size,100]):t.min([n.size,i.width]),e.placement===A?t.assign(o,{marginLeft:n.size/-2+(n.unit||"px"),marginTop:"%"===a.unit?0:a.size/-2+(a.unit||"px"),left:"50%",top:"%"===a.unit?0:"50%"}):e.placement===w?t.assign(o,{left:"0px",top:"0px"}):e.placement===E?t.assign(o,{right:"0px",top:"0px"}):e.placement===C?t.assign(o,{marginLeft:n.size/-2+(n.unit||"px"),top:"0px",left:"50%"}):e.placement===D?t.assign(o,{marginTop:"%"===a.unit?0:a.size/-2+(a.unit||"px"),top:"%"===a.unit?0:"50%",right:"0px"}):e.placement===T?t.assign(o,{marginTop:"%"===a.unit?0:a.size/-2+(a.unit||"px"),top:"%"===a.unit?0:"50%",left:"0px"}):e.placement===S?t.assign(o,{bottom:"0px",left:"0px"}):e.placement===P?t.assign(o,{bottom:"0px",right:"0px"}):e.placement===I&&t.assign(o,{marginLeft:n.size/-2+(n.unit||"px"),left:"50%",bottom:"0px"}),""===a.unit&&(a.unit="px"),""===n.unit&&(n.unit="px"),t.assign(o,{height:a.size+a.unit,width:n.size+n.unit}),o}(e,n,a,o)),e.origin===v&&(s=function(e,i,n,a,o){var s=void 0,r=void 0;return e.placement===A?(a=t.min([a,n.height]),o=t.min([o,n.width]),s=R(i.top,i.height,a),r=b(i.left,i.width,o)):e.placement===w?(a=t.min([a,i.top]),o=t.min([o,i.left]),s=i.top-a,r=i.left-o):e.placement===E?(a=t.min([a,i.top]),o=t.min([o,M(n.width,i.width,i.left)]),s=i.top-a,r=i.width+i.left):e.placement===C?(a=t.min([a,i.top]),o=t.min([o,n.width]),s=i.top-a,r=b(i.left,i.width,o)):e.placement===D?(a=t.min([a,n.height]),o=t.min([o,M(n.width,i.width,i.left)]),s=R(i.top,i.height,a),r=i.width+i.left):e.placement===T?(a=t.min([a,n.height]),o=t.min([o,i.left]),s=R(i.top,i.height,a),r=i.left-o):e.placement===S?(a=t.min([a,_(n.height,i.top,i.height)]),o=t.min([o,i.left]),s=i.top+i.height,r=i.left-o):e.placement===P?(a=t.min([a,_(n.height,i.top,i.height)]),o=t.min([o,M(n.width,i.width,i.left)]),s=i.top+i.height,r=i.width+i.left):e.placement===I&&(a=t.min([a,_(n.height,i.top,i.height)]),o=t.min([o,n.width]),s=i.top+i.height,r=b(i.left,i.width,o)),s=t.max([0,s]),r=t.max([0,r]),t.assign({position:"absolute",display:"block"},{top:s,left:r,width:o,height:a})}(e,i,n,o,a)),e.origin===m&&(s=function(e,i,n,a,o){var s=void 0,r=void 0,p=void 0,c=void 0;return e.placement===A?(p=t.min([i.actualTop+e.y,n.height-(i.actualTop+e.y)]),a=t.min([a,2*p]),c=t.min([i.actualLeft+e.x,n.width-(i.actualLeft+e.x)]),o=t.min([o,2*c]),s=i.top+e.y-a/2,r=i.left+e.x-o/2):e.placement===w?(a=t.min([a,i.actualTop+e.y]),o=t.min([o,i.actualLeft+e.x]),s=i.top+e.y-a,r=i.left+e.x-o):e.placement===E?(a=t.min([a,i.actualTop+e.y]),o=t.min([o,n.width-(i.actualLeft+e.x)]),s=i.top+e.y-a,r=i.left+e.x):e.placement===C?(a=t.min([a,i.actualTop+e.y]),c=t.min([i.actualLeft+e.x,n.width-(i.actualLeft+e.x)]),o=t.min([o,2*c]),s=i.top+e.y-a,r=i.left+e.x-o/2):e.placement===D?(p=t.min([i.actualTop+e.y,n.height-(i.actualTop+e.y)]),a=t.min([a,2*p]),o=t.min([o,n.width-(i.actualLeft+e.x)]),s=i.top+e.y-a/2,r=i.left+e.x):e.placement===T?(p=t.min([i.actualTop+e.y,n.height-(i.actualTop+e.y)]),a=t.min([a,2*p]),o=t.min([o,i.actualLeft+e.x]),s=i.top+e.y-a/2,r=i.left+e.x-o):e.placement===S?(a=t.min([a,n.height-(i.actulaTop+e.y)]),o=t.min([o,i.actualLeft+e.x]),s=i.top+e.y,r=i.left+e.x-o):e.placement===P?(a=t.min([a,n.height-(i.actualTop+e.y)]),o=t.min([o,n.width-(i.actualLeft+e.x)]),s=i.top+e.y,r=i.left+e.x):e.placement===I&&(a=t.min([a,n.height-(i.actualTop+e.y)]),c=t.min([i.actualLeft+e.x,n.width-(i.actualLeft+e.x)]),o=t.min([o,2*c]),s=i.top+e.y,r=i.left+e.x-o/2),s=t.max([0,s]),r=t.max([0,r]),t.assign({position:"absolute",display:"block"},{top:s,left:r,width:o,height:a})}(e,i,n,o,a)),s=function(e,i,n,a){var o=h(a.width),s=h(a.height);if(o<10||s<10){var r=O(n);r.size="%"===r.unit?t.min([r.size,100]):t.min([r.size,e.height]);var p=O(i);return p.size="%"===p.unit?t.min([p.size,100]):t.min([p.size,e.width]),{position:"fixed",display:"block",width:p.size+(r.unit||"px"),height:r.size+(p.unit||"px"),marginLeft:p.size/-2+(r.unit||"px"),marginTop:r.size/-2+(p.unit||"px"),left:"50%",top:"50%"}}return a}(n,a,o,s)},U={displayName:"TPAPopup",mixins:[n.mixins.skinBasedComp,r,p,d,u,c],propTypes:{compData:e.santaTypesDefinitions.Component.compData.isRequired,dynamicClientSpecMapAspect:e.santaTypesDefinitions.SiteAspects.dynamicClientSpecMapAspect.isRequired,clientSpecMap:e.santaTypesDefinitions.RendererModel.clientSpecMap.isRequired,siteScrollingBlocker:e.santaTypesDefinitions.SiteAspects.siteScrollingBlocker.isRequired,id:e.santaTypesDefinitions.Component.id.isRequired,aspectData:e.santaTypesDefinitions.TPA.data.isRequired,onCloseCallback:i.func,removePopup:e.santaTypesDefinitions.TPA.removePopup.isRequired,isMobileView:e.santaTypesDefinitions.isMobileView.isRequired,registerTpaComp:e.santaTypesDefinitions.TPA.registerTpaComp},getInitialState:function(){return{showComponent:!0,initialInstance:this.props.dynamicClientSpecMapAspect.getAppInstance(this.props.compData.applicationId)||this.getAppData(this).instance,registeredEvents:[]}},getSkinProperties:function(){var e=this.state.showComponent?this.getSelfStyle():{display:"none"},t=this.isBareTheme()?"none":"block";return this.state.showComponent?{"":{style:e},closeButton:{onClick:this.hide,style:{display:t}},iframe:{"data-src":this.buildUrl(this.props.compData.url),scrolling:"no",frameBorder:"0",allow:l.getIFramePermissions(),allowtransparency:"true",allowFullScreen:!0,name:this.props.id}}:{"":{style:e}}},mutateIframeUrlQueryParam:function(e){return e.origCompId=this.props.compData.origCompId,e},getPopupWidth:function(){return t.isUndefined(this.state.width)?this.props.compData.width:this.state.width},getPopupHeight:function(){return t.isUndefined(this.state.height)?this.props.compData.height:this.state.height},getSelfStyle:function(){var e=t.defaults(this.props.compData.position,{x:0,y:0}),i=this.props.compData.origCompStyle,n=this.props.compData.windowSize,a=x(e,i,n,this.getPopupWidth(),this.getPopupHeight());return a.zIndex=this.props.aspectData.isModalOpen?1001:null,this.shouldDisableScroll=function(e,t,i){return"100%"===e&&("100%"===t||Number(h(t))>=i.width)}(a.height,a.width,n)&&this.props.isMobileView,this.getThemeStyle(a)},getThemeStyle:function(e){return this.isBareTheme()?t.merge(e,{background:"none",boxShadow:"none",borderRadius:0}):e},hide:function(e,i){var n=this;this.setState({showComponent:!1},function(){var a=e&&e.message?e:void 0;n.props.onCloseCallback&&n.props.onCloseCallback(a),this.props.removePopup(n),t.isFunction(i)&&i()})},isBareTheme:function(){return"BARE"===this.props.compData.theme},componentWillReceiveProps:function(e){var i=t.get(this.props.clientSpecMap,[this.props.compData.applicationId,"instance"]),n=t.get(e.clientSpecMap,[this.props.compData.applicationId,"instance"]);i!==n&&this.setState({initialInstance:n})},componentWillMount:function(){this.props.registerTpaComp(this)},componentDidMount:function(){this.props.siteScrollingBlocker.setSiteScrollingBlocked(this,this.shouldDisableScroll)},componentDidUpdate:function(){this.props.siteScrollingBlocker.setSiteScrollingBlocked(this,this.shouldDisableScroll)},componentWillUnmount:function(){this.props.siteScrollingBlocker.setSiteScrollingBlocked(this,!1)}};return g.register("wysiwyg.viewer.components.tpapps.TPAPopup",U),U}.apply(t,n))||(e.exports=a)},1806:function(e,t,i){var n,a;n=[i(0),i(55),i(1807)],void 0===(a=function(e,t,i){"use strict";var n=function(t){this.aspectSiteAPI=t,this.hub=new i,e.bindAll(this,e.functionsIn(this))};return n.prototype={publish:function(i,n,a){var o=this,s=a.eventKey,r=a.isPersistent,p=this.hub.getEventListeners(i,s),c=this.hub.getWorkerEventListeners(i,s),d={eventType:t.addPubSubEventPrefix(s),intent:"addEventListener",params:{data:a.eventData,name:s,origin:n}};if(e.forEach(p,function(e){return o._sendDataToComp(e,d)}),e.forEach(c,function(e){return o._sendMessageToWorker(e,i,{eventKey:s,eventData:d.params})}),r){var u=a.eventData;this.hub.persistData(i,s,n,u)}},subscribe:function(i){var n=i.compId,a=i.data,o=t.stripPubSubPrefix(a.eventKey),s=a.receivePastEvents,r=t.getAppDefId(this.aspectSiteAPI,n);if(this.hub.addEventListener(r,o,n),s){var p=this.hub.getPersistedData(r,o);if(!e.isEmpty(p)){var c={intent:"TPA_RESPONSE",callId:i.callId,type:i.type,res:{drain:!0,data:p},status:!0,compId:n};this._sendDataToComp(n,c)}}},unsubscribe:function(e,t,i){this.hub.getEventListeners(e,i)&&this.hub.removeEventListener(e,i,t)},deleteCompListeners:function(e,t){this.hub.deleteCompListeners(e,t)},subscribeAsPlatformWorker:function(t,i,n,a,o){if(this.hub.addWorkerEventListener(t,n,i),a){var s=this.hub.getPersistedData(t,n);e.isEmpty(s)||this._sendMessageToWorker(i,t,{eventKey:n,callbackId:o,eventDataArray:s,invokePastEvents:!0})}},unsubscribeAsPlatformWorker:function(e,t,i){this.hub.getWorkerEventListeners(e,i)&&this.hub.removeWorkerEventListener(e,i,t)},_sendDataToComp:function(e,t){var i=this.aspectSiteAPI.getComponentById(e);i&&i.sendPostMessage(t)},_sendMessageToWorker:function(e,t,i){this.aspectSiteAPI.getSiteAPI().getSiteAspect("WidgetAspect").getWidgetHandler().invokeWorkerSubscribers(e,t,i)}},n}.apply(t,n))||(e.exports=a)},1807:function(e,t,i){var n,a;n=[i(0),i(1)],void 0===(a=function(e,t){"use strict";var i=function(e){this.hub=e||{}};return i.prototype={persistData:function(e,i,n,a){var o={data:a,name:i,origin:n},s=this._addEvent(e,i);s.data.length>=1e3&&(t.log.warn("You have exceeded the data limit, and some of the data will be lost! Please make sure you are not persisting unneeded data."),s.data.shift()),s.data.push(o)},addEventListener:function(t,i,n){var a=this._addEvent(t,i);e.includes(a.listeners,n)||a.listeners.push(n)},addWorkerEventListener:function(t,i,n){var a=this._addEvent(t,i);e.includes(a.workerListeners,n)||a.workerListeners.push(n)},removeEventListener:function(t,i,n){var a=this._getEvent(t,i);a&&(a.listeners=e.without(a.listeners,n))},removeWorkerEventListener:function(t,i,n){var a=this._getEvent(t,i);a&&(a.workerListeners=e.without(a.workerListeners,n))},getPersistedData:function(e,t){var i=this._getEvent(e,t);return i&&i.data},getEventListeners:function(e,t){var i=this._getEvent(e,t);return i&&i.listeners},getWorkerEventListeners:function(e,t){var i=this._getEvent(e,t);return i&&i.workerListeners},deleteCompListeners:function(t,i){var n=this,a=this._getAppEvents(t);e.forOwn(a,function(e,a){n.removeEventListener(t,a,i)})},_addEvent:function(e,t){var i=this.hub[e];i||(i=this.hub[e]={});var n=i[t];return n||(n=i[t]={data:[],listeners:[],workerListeners:[]}),n},_getEvent:function(e,t){var i=this.hub[e];if(i)return i[t]},_getAppEvents:function(e){return this.hub[e]}},i}.apply(t,n))||(e.exports=a)},1808:function(e,t,i){var n,a;n=[i(0),i(1),i(326)],void 0===(a=function(e,t,i){"use strict";var n=t.urlUtils,a=t.throttleUtils.throttledForEach,o=function(){var t,o=this._aspectSiteAPI.getPageUrl.bind(this._aspectSiteAPI),r=(t=this._aspectSiteAPI.getSiteData().getClientSpecMap(),e.filter(t,function(t){return e.isString(t.pixelUrl)&&t.permissions&&!t.permissions.revoked})),p=e.map(r,function(e){return new i(e.pixelUrl).addMultipleQueryParams({instance:e.instance,page:o(),ck:n.cacheKiller()}).build()});a(p,s.sendRequest,s.CHUNK_SIZE,s.CHUNK_INTERVAL)};function s(e){this._aspectSiteAPI=e,this._aspectSiteAPI.registerToComponentDidMount(o.bind(this)),this._aspectSiteAPI.registerToUrlPageChange(o.bind(this))}return s.sendRequest=function(e){new window.Image(0,0).src=e},s.CHUNK_SIZE=1,s.CHUNK_INTERVAL=100,s}.apply(t,n))||(e.exports=a)},1809:function(e,t,i){var n,a;n=[i(0),i(1),i(1810)],void 0===(a=function(e,t,i){"use strict";var n="tpaModalAspect";function a(t){this.aspectSiteApi=t,e.bindAll(this,e.functionsIn(this))}return a.prototype={getComponentsToRender:function(){var t=function(t){var i=t.getAspectGlobalData(n);return e.get(i,"modalStructure")}(this.aspectSiteApi);if(t){var i=this.aspectSiteApi.getAspectGlobalData(n);return[{structure:t,props:{compData:i.modalData,onCloseCallback:i.modalOnClose,key:t.id}}]}return null},showModal:function(e,i){this.aspectSiteApi.getSiteData().isMobileView()&&("LIGHT_BOX"===e.theme?(this.aspectSiteApi.exitFullScreenMode(),this.aspectSiteApi.setSiteRootHiddenState(!0)):(this.aspectSiteApi.enterFullScreenMode({scrollable:!1}),this.aspectSiteApi.setSiteRootHiddenState(!1))),this.aspectSiteApi.setSiteRootAriaHiddenState(!0),this.aspectSiteApi.getComponentById("SITE_BACKGROUND").setAriaHiddenState(!0),this.aspectSiteApi.setAspectGlobalData(n,{modalStructure:{componentType:"wysiwyg.viewer.components.tpapps.TPAModal",type:"Component",id:t.guidUtils.getUniqueId(),skin:"wysiwyg.viewer.skins.TPAModalSkin"},modalData:e,modalOnClose:i}),this.aspectSiteApi.forceUpdate()},removeModal:function(){this.aspectSiteApi.getSiteData().isMobileView()&&(this.aspectSiteApi.exitFullScreenMode(),this.aspectSiteApi.setSiteRootHiddenState(!1)),this.aspectSiteApi.setSiteRootAriaHiddenState(!1),this.aspectSiteApi.getComponentById("SITE_BACKGROUND").setAriaHiddenState(!1),this.aspectSiteApi.setAspectGlobalData(n,{modalStructure:null})}},a}.apply(t,n))||(e.exports=a)},1810:function(e,t,i){var n,a;n=[i(2),i(0),i(10),i(5),i(11),i(14),i(15),i(90),i(77),i(557),i(131),i(55),i(6),i(556),i(4)],void 0===(a=function(e,t,i,n,a,o,s,r,p,c,d,u,l,g,h){"use strict";var f=h.compRegistrar,m={displayName:"TPAModal",propTypes:{compData:e.santaTypesDefinitions.Component.compData.isRequired,dynamicClientSpecMapAspect:e.santaTypesDefinitions.SiteAspects.dynamicClientSpecMapAspect.isRequired,clientSpecMap:e.santaTypesDefinitions.RendererModel.clientSpecMap.isRequired,windowResizeEvent:e.santaTypesDefinitions.SiteAspects.windowResizeEvent.isRequired,siteScrollingBlocker:e.santaTypesDefinitions.SiteAspects.siteScrollingBlocker.isRequired,id:e.santaTypesDefinitions.Component.id.isRequired,isMobileView:e.santaTypesDefinitions.isMobileView.isRequired,removeModal:e.santaTypesDefinitions.TPA.removeModal.isRequired,exitFullScreenMode:e.santaTypesDefinitions.exitFullScreenMode.isRequired,onCloseCallback:n.func,windowKeyboardEvent:e.santaTypesDefinitions.SiteAspects.windowKeyboardEvent.isRequired,isViewerMode:e.santaTypesDefinitions.isViewerMode.isRequired,ios:e.santaTypesDefinitions.BrowserFlags.ios.isRequired,registerTpaComp:e.santaTypesDefinitions.TPA.registerTpaComp},mixins:[h.mixins.skinBasedComp,r,p,c,d,h.mixins.cyclicTabbingMixin],getInitialState:function(){return this.props.windowResizeEvent.registerToResize(this),{showComponent:!0,registeredEvents:[],initialInstance:this.props.dynamicClientSpecMapAspect.getAppInstance(this.props.compData.applicationId)||this.getAppData(this).instance,$displayDevice:this.getDeviceType(),windowSize:this.props.compData.windowSize}},componentWillMount:function(){this.props.registerTpaComp(this),this.props.windowKeyboardEvent&&this.props.windowKeyboardEvent.registerToEscapeKey(this),this.props.isViewerMode&&this.registerOnAnimationEnd(function(){var e=this.refs.dialog;e&&a.findDOMNode(e).focus(),this.unregisterOnAnimationEnd()})},componentDidMount:function(){if(this.props.isViewerMode){var e=a.findDOMNode(this.refs.dialog);e.contains(window.document.activeElement)||e.focus()}"mobile"===this.getDeviceType()&&this.props.siteScrollingBlocker.setSiteScrollingBlockedForModal(this,!0,this.props.ios())},componentWillUnmount:function(){this.props.windowKeyboardEvent&&this.props.windowKeyboardEvent.unRegisterKeys(this),"mobile"===this.getDeviceType()&&this.props.siteScrollingBlocker.setSiteScrollingBlockedForModal(this,!1,this.props.ios())},componentDidUpdate:function(e,t){"mobile"===this.getDeviceType()&&this.state.height>0&&t.height!==this.state.height&&this.props.siteScrollingBlocker.onHeightChanged(this.props.ios(),this.state.height)},componentWillReceiveProps:function(e){var i=t.get(this.props.clientSpecMap,[this.props.compData.applicationId,"instance"]),n=t.get(e.clientSpecMap,[this.props.compData.applicationId,"instance"]);i!==n&&this.setState({initialInstance:n})},getDefaultProperties:function(){return{"":{style:{position:"fixed",display:"block"},onKeyDown:this.preventTabbingOut},blockingLayer:{onClick:this.hide},frameWrap:{style:this.getIframeWrapperStyle()},dialog:{style:this.getDialogStyle(),"aria-label":this.props.compData.title||"Modal Dialog"},xButton:{children:"×",onClick:this.hide,style:{display:"block"}},iframe:{"data-src":this.buildUrl(this.props.compData.url),frameBorder:"0",allow:u.getIFramePermissions(),allowtransparency:"true",allowFullScreen:!0,name:this.props.id}}},getHiddenProperties:function(){return{"":{style:{display:"none"}}}},getBareProperties:function(){return t.merge(this.getDefaultProperties(),{frameWrap:{style:{background:"transparent",border:"none"}},xButton:{style:{display:"none"}}},this.props.siteScrollingBlocker.getDeviceSpecificProperties("mobile"===this.getDeviceType(),this.props.ios(),this.state.height))},getSkinProperties:function(){if(this.state.showComponent)switch(this.props.compData.theme){case"BARE":case"LIGHT_BOX":return this.getBareProperties();default:return this.getDefaultProperties()}return this.getHiddenProperties()},getIframeWrapperStyle:function(){var e={};return this.props.isMobileView&&(e={WebkitOverflowScrolling:"touch",overflowY:"scroll"}),e},getDialogStyle:function(){if("mobile"===this.getDeviceType())return{pointerEvents:"auto"};var e=this.state.windowSize,i=t.isNumber(this.state.width)?this.state.width:this.props.compData.width,n=t.isNumber(this.state.height)?this.state.height:this.props.compData.height;if(i=Math.min(i,e.width),n=Math.min(n,e.height),!this.getAppData().isWixTPA){var a=e.width-50,o=e.height-50;i>=a&&n>=o&&(i=a,n=o)}return{width:i,height:n,marginTop:-n/2,marginLeft:-i/2}},mutateIframeUrlQueryParam:function(e){return e.origCompId=this.props.compData.origCompId,e.isInModal=!0,e},hide:function(e,i){var n=this;this.setState({showComponent:!1},function(){var a=e&&e.message?e:void 0;n.props.onCloseCallback&&n.props.onCloseCallback(a),"mobile"===n.state.$displayDevice&&n.props.exitFullScreenMode(),n.props.windowResizeEvent.unregisterToResize(n),n.props.removeModal(n),t.isFunction(i)&&i()})},isBareTheme:function(){return"BARE"===this.props.compData.theme},onResize:function(){var e=i(window);this.setState({windowSize:{width:e.width(),height:e.height()}})},onEscapeKey:function(){this.hide()}};return f.register("wysiwyg.viewer.components.tpapps.TPAModal",m),l.skinsMap.addBatch(g),m}.apply(t,n))||(e.exports=a)},1811:function(e,t,i){var n,a;n=[i(0),i(1),i(7),i(104)],void 0===(a=function(e,t,i,n){"use strict";var a="tpaMobileViewportAspect",o=function(t){this.aspectSiteAPI=t,e.bindAll(this,e.functionsIn(this)),this.aspectSiteAPI.registerToSiteReady(this.fixMobileViewportIfNeeded),this.aspectSiteAPI.registerToUrlPageChange(this.fixMobileViewportIfNeeded)};return o.prototype={fixMobileViewportIfNeeded:function(){var e=this.aspectSiteAPI.getSiteData();if(i.isOpen("sv_tpaMobileViewportFix",e)){var o=this.aspectSiteAPI.getAspectGlobalData(a);if(n.isCurrentPageFullResponsive(e)){if(!o||!o.isResponsive){var s={isResponsive:!0};this.aspectSiteAPI.setAspectGlobalData(a,s),t.mobileViewportFixer.fixViewportTag(e,s)}}else o&&o.isResponsive&&(this.aspectSiteAPI.setAspectGlobalData(a,null),t.mobileViewportFixer.fixViewportTag(e,null))}}},o}.apply(t,n))||(e.exports=a)},1812:function(e,t,i){var n,a;n=[i(0)],void 0===(a=function(e){"use strict";var t=function(t){this.siteAspectsSiteAPI=t,e.bindAll(this,e.functionsIn(this))};return t.prototype={updateSectionUrlState:function(e,t){var i=this.siteAspectsSiteAPI.getComponentById(e);i&&i.setState({sectionUrlState:t})},updatePushState:function(e,t){var i=this.siteAspectsSiteAPI.getComponentById(e);i&&i.setState({pushState:t})},updateSectionUrlParams:function(e,t){var i=this.siteAspectsSiteAPI.getComponentById(e);i&&i.setState({sectionUrlParams:t})},reportStateChanged:function(e,t){var i=this.siteAspectsSiteAPI.getComponentById(e);i&&i.reportStateChanged(t)}},t}.apply(t,n))||(e.exports=a)},1813:function(e,t,i){var n,a;n=[i(0)],void 0===(a=function(e){"use strict";function t(t){this.aspectSiteApi=t,this.aliveTpaComponentPromises={},this.handleComponentIsAlive={},e.bindAll(this,e.functionsIn(this))}return t.prototype={clearComponentIsAlive:function(e){delete this.handleComponentIsAlive[e],delete this.aliveTpaComponentPromises[e]},markComponentIsAlive:function(e){var t=function(e,t){return e.getComponentById(t)}(this.aspectSiteApi,e);this.handleComponentIsAlive[e]?this.handleComponentIsAlive[e](t):this.aliveTpaComponentPromises[e]=Promise.resolve(t)},getComponentWhenReady:function(e){var t=this.aliveTpaComponentPromises;return t[e]=t[e]||new Promise(function(t){this.handleComponentIsAlive[e]=t}.bind(this)),t[e]}},t}.apply(t,n))||(e.exports=a)},1814:function(e,t,i){var n,a;n=[i(0),i(234)],void 0===(a=function(e,t){"use strict";var i=function(e,t){this._listeners={},this._siteAPI=e,this._currentPageId=t||this._siteAPI.getSiteData().getCurrentUrlPageId(),this._siteAPI.registerToUrlPageChange(this.notifyPageChanged.bind(this))};return i.prototype={notifyPageChanged:function(){var i=this._siteAPI.getSiteData().getCurrentUrlPageId(),n=this._currentPageId;e.forEach(this._listeners,function(a){e.forEach(a,function(a){var o=a.comp.props.rootId;if(a.comp._isMounted&&function(e,i,n,a){return e.type===t.PAGE_NAVIGATION||e.type===t.PAGE_NAVIGATION_CHANGE||e.type===t.PAGE_NAVIGATION_IN&&a===i||e.type===t.PAGE_NAVIGATION_OUT&&a===n}(a,i,n,o)){var s={toPage:i,fromPage:n,isAppOnPage:o===i,wasAppOnPage:o===n},r=e.get(this._siteAPI.getSiteData().getExistingRootNavigationInfo(i),"routerPublicData");r&&(s.routerData=r),a.comp.sendPostMessage({intent:"addEventListener",eventType:a.type,params:s})}}.bind(this))}.bind(this)),this._currentPageId=i},registerToPageChanged:function(e,t){var i=this._listeners[e.props.id];i||(i=this._listeners[e.props.id]=[]),i.push({comp:e,type:t})},unregisterToPageChanged:function(e){delete this._listeners[e.props.id]}},i}.apply(t,n))||(e.exports=a)},1815:function(e,t,i){var n,a,o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}n=[i(0),i(66),i(1),i(55)],void 0===(a=function(e,t,i,n){"use strict";var a,p="tpa_public_api_",c=3e4,d="Widget",u=(r(a={},"Page",n.isTPASection),r(a,d,n.isGluedWidget),a),l={TIMEOUT:"Callback Timeout Expired",COMP_NOT_FOUND:"ComponentId Not Found",APP_NOT_FOUND:"ApplicationId Not Found",COMP_NOT_SUPPORTED:"Component Not Supported"};function g(e){return p+e}function h(t,a,o){var s=t.getPageData().id,r=i.siteConstants.MASTER_PAGE_ID,p=e.get(n.getAppDataByAppDefinitionId(t,a),"applicationId");if(!p)return{compId:null,error:l.APP_NOT_FOUND};var c=t.getCompsDataOnPage(s).concat(t.getCompsDataOnPage(r)).filter(function(t){return function(t,i){return e.get(t,"applicationId")===i.toString()}(t,p)});if(0===c.length)return{compId:null,error:l.COMP_NOT_FOUND};var d=c.filter(function(t){return function(t,i){return e.get(u,i,function(){return!1})(t)}(t,o)});return 0===d.length?{compId:null,error:l.COMP_NOT_SUPPORTED}:d.length>1?{compId:null,error:l.COMP_NOT_SUPPORTED}:{compId:e.get(d[0],"compId")}}function f(t){return e.get(t.getSiteData().getExistingRootNavigationInfo(),"tpaInnerRoute")}function m(e,t){return n.isTPASection({componentType:e.getComponentType(t)})}var v=function(){function t(e,i,n){var a=this;s(this,t),this.compId=e,this.isTPASection=i,this.getCurrentSectionStateFunc=n,this.resolved=!1,this.rejected=!1,this.tpaSectionState=void 0,this.subscribers=[],this.timeoutId=setTimeout(function(){return a.reject()},c)}return o(t,[{key:"resolve",value:function(){this.resolved=!0,this.invokeSubscribers(g(this.compId)),clearTimeout(this.timeoutId),this.isTPASection&&(this.tpaSectionState=this.getCurrentSectionStateFunc())}},{key:"reject",value:function(){this.rejected=!0,this.invokeSubscribers(null,l.TIMEOUT)}},{key:"reset",value:function(){this.resolved=!1,this.rejected=!1,this.subscribers=[]}},{key:"subscribe",value:function(e){this.subscribers.push(e)}},{key:"invokeSubscribers",value:function(t,i){e.invokeMap(this.subscribers,e.call,null,t,i),this.subscribers=[]}}]),t}();return function(){function i(t){s(this,i),this.siteAPI=t,this.apiStore={},this.getCurrentSectionStateFunc=e.partial(f,this.siteAPI)}return o(i,[{key:"registerApi",value:function(e,i){if(!this.apiStore[i]){var n=m(this.siteAPI,i);this.apiStore[i]=new v(i,n,this.getCurrentSectionStateFunc)}this.apiStore[i].resolve(),t.api.request(g(i),{initiator:e}).then(function(e){return t.api.set(g(i),e)})}},{key:"requireComponentAPI",value:function(e,t){var i=m(this.siteAPI,e);this.apiStore[e]||(this.apiStore[e]=new v(e,i,this.getCurrentSectionStateFunc)),i&&this.getCurrentSectionStateFunc()!==this.apiStore[e].tpaSectionState&&this.apiStore[e].reset(),this.apiStore[e].resolved?t(g(e)):this.apiStore[e].rejected?t(null,l.TIMEOUT):this.apiStore[e].subscribe(t)}},{key:"requireSingletonAPI",value:function(e,t,i){var n=h(this.siteAPI,e,t);n.compId?this.requireComponentAPI(n.compId,i):i(null,n.error)}}]),i}()}.apply(t,n))||(e.exports=a)},1816:function(e,t,i){var n,a;n=[i(0),i(1817)],void 0===(a=function(e,t){"use strict";var i=function(e){this._siteAPI=e};return i.prototype={callHandler:function(e,i){var n=i.type;return t[n].call(this,e,i)}},i}.apply(t,n))||(e.exports=a)},1817:function(e,t,i){var n,a;n=[i(0),i(327)],void 0===(a=function(e,t){"use strict";return{sectionsUrls:function(i,n){var a=t.mapPageToWidgets(i),o=n.compData,s=i.getSiteData().getClientSpecMap()[o.applicationId].applicationId;if(e.isEmpty(a)||e.isUndefined(a[s]))return null;var r=a[s];return e.map(r,function(e){return{tpaPageId:e.tpaPageId,url:i.getPageUrlFor(e.pageId)}})}}}.apply(t,n))||(e.exports=a)},2:function(e,t){e.exports=i},20:function(e,t){e.exports=h},21:function(e,t){e.exports=f},233:function(e,t,i){var n,a;n=[i(1784),i(0),i(1)],void 0===(a=function(e,t,i){"use strict";var n=i.logger;return t.forEach(e,function(e,t){e.errorName=t}),n.register("tpa","error",e),e}.apply(t,n))||(e.exports=a)},234:function(e,t,i){var n;void 0===(n=function(){"use strict";return{SCROLL:"SCROLL",PAGE_NAVIGATION:"PAGE_NAVIGATION",PAGE_NAVIGATION_IN:"PAGE_NAVIGATION_IN",PAGE_NAVIGATION_OUT:"PAGE_NAVIGATION_OUT",PAGE_NAVIGATION_CHANGE:"PAGE_NAVIGATION_CHANGE",STATE_CHANGED:"STATE_CHANGED",SESSION_CHANGED:"SESSION_CHANGED",INSTANCE_CHANGED:"INSTANCE_CHANGED",MEMBER_DETAILS_UPDATED:"MEMBER_DETAILS_UPDATED",SITE_METADATA_CHANGED:"SITE_METADATA_CHANGED",KEY_DOWN:"KEY_DOWN",KEY_UP:"KEY_UP"}}.apply(t,[]))||(e.exports=n)},24:function(e,t){e.exports=m},3:function(e,t){e.exports=n},31:function(e,t){e.exports=v},325:function(e,t,i){var n,a;n=[i(1785),i(0),i(1)],void 0===(a=function(e,t,i){"use strict";return i.logger.register("tpa","event",e),e}.apply(t,n))||(e.exports=a)},326:function(e,t,i){var n,a;n=[i(0),i(1)],void 0===(a=function(e,t){"use strict";var i=function(e){this.url=t.urlUtils.parseUrl(e),this.url.query=this.url.query||{},this.url.search=null,this.url.hash=this.url.hash||""};return i.prototype={addQueryParam:function(t,i){var n=this.url.query;return i&&!e.isEmpty(i)&&(n[t]?e.isArray(n[t])?n[t].push(i):n[t]=[n[t],i]:n[t]=i),this},addMultipleQueryParams:function(t){return t&&!e.isEmpty(t)&&e.assign(this.url.query,t),this},addQueryParamsFromFunc:function(t,i){return e.isFunction(t)&&t.apply(null,[this].concat(i)),this},setHash:function(t){return e.isString(t)&&!e.isEmpty(t)&&(t="#"===t[0]?t:"#"+t,this.url.hash=t),this},mutateIframeSrc:function(e){return e&&(this.url=e(this.url)),this},filterQueryParams:function(t){return t&&!e.isEmpty(t)&&(this.url.query=e.pick(this.url.query,t)),this},build:function(){return t.urlUtils.buildFullUrl(this.url)}},i}.apply(t,n))||(e.exports=a)},327:function(e,t,i){var n,a;n=[i(0),i(328),i(1)],void 0===(a=function(e,t,i){"use strict";var n=new i.SiteDataPrivates;return{mapPageToWidgets:function(i){var a=i.getSiteData();n.has(a)||n.set(a,{});var o=n.get(a);if(e.size(o)>0)return o;var s=t.getSitePagesData(i.getSiteData());return e.forEach(s,function(t){if(t&&t.tpaApplicationId>0){var i={pageId:t.id,tpaId:t.tpaApplicationId,tpaPageId:t.tpaPageId};e.isUndefined(o[i.tpaId])&&(o[i.tpaId]=[]),o[i.tpaId].push(i)}}),o}}}.apply(t,n))||(e.exports=a)},328:function(e,t,i){var n,a;n=[i(0),i(1),i(3),i(55)],void 0===(a=function(e,t,i,n){"use strict";var a=function(i,n){n=n||{};var a=t.menuUtils.getSiteMenuWithoutRenderedLinks(i,!0);n.filterHideFromMenuPages&&(a=o(a,i.getClientSpecMap())),n.homePageId=i.getMainPageId();var s=u(a,i,n);return n.includeIsHomePage&&(s=c(s,n.homePageId)),n.includePagesUrl&&(s=r(i,s,e.get(n,"baseUrl"),n)),s},o=function(t,i){return e.filter(t,function(e){return!p(i,e.link)})};function s(e,i,n,a){return t.wixUrlParser.getUrl(e,{pageId:i,title:n},void 0,!0,a)}var r=function t(i,n,a){return e.map(n,function(e){var n=i.getDataByQuery(e.id,"masterPage");return n&&n.pageUriSEO&&(e.url=s(i,e.id,n.pageUriSEO,a)),e.subPages&&(e.subPages=t(i,e.subPages,a)),e})},p=function(t,i){if("PageLink"===e.get(i,"type")){var a=e.get(i,"pageId.tpaApplicationId"),o=e.get(i,"pageId.tpaPageId"),s=e.get(t,a);return n.isPageMarkedAsHideFromMenu(s,o)}return!1},c=function t(i,n){return e.map(i,function(e){return e.isHomepage=d(e,n),e.subPages&&(e.subPages=t(e.subPages,n)),e})},d=function(t,i){return!e.isUndefined(t)&&t.id===i},u=function(t,i,n){var a=[],o=n.enhancedInfo?h:l;return e.forEach(t,function(t){var s=o(t,i,n),r=t.items;e.forEach(r,function(e){var t=o(e,i,n);s.subPages=s.subPages||[],s.subPages.push(t)}),a.push(s)}),a},l=function(i){if(i.link){var n=e.get(i.link,"pageId.id");return{title:i.label||"",id:t.stringUtils.startsWith(n,"#")?n.substr(1):n,hide:!i.isVisible||!1}}return{}},g=function(i,n,a){var o=function(i){var n=e.get(i,"link.pageId.id");return n?t.stringUtils.startsWith(n,"#")?n.substr(1):n:""}(i),r=e.get(i,"link.pageId.pageUriSEO"),p={isHomePage:o===a.homePageId};return r&&(p.url=s(n,o,r,a.baseUrl)),p},h=function(t,n,a){var o=i.linkUtils.getRelevantLinkDataFromMenuItem(t);switch((o=e.merge(o,{type:o.type||"MenuHeader",title:t.label||"",hidden:!t.isVisible||!1})).type){case"PageLink":case"AnchorLink":o=e.merge(o,g(t,n,a));break;case"DocumentLink":o.url=i.linkUtils.getDocumentLink(t.link,n)}return o},f=function(e,t){return t.getDataByQuery(e,"masterPage")},m=function(t,i){var n=[];return e.forEach(t,function(t){e.forEach(t.subPages,function(e){n.push(f(e.id,i))}),n.push(f(t.id,i))}),n};return{getSitePagesInfoData:a,getSitePagesData:function(e){var t=a(e);return m(t,e)}}}.apply(t,n))||(e.exports=a)},329:function(e,t,i){var n,a;n=[i(10),i(0)],void 0===(a=function(e,t){"use strict";return{measureTPA:function(i,n,a,o){var s=e(a[i]);t.set(n.custom,[i,"hasIframe"],Boolean(a[i+"iframe"]));var r=parseInt(s.css("min-height"),10),p=parseInt(s.css("min-width"),10),c=s.attr("data-ignore-anchors");r&&"true"!==c&&(n.minHeight[i]=r,n.height[i]=r),r&&"true"===c&&(n.minHeight[i]=o.structure.layout.height,n.height[i]=o.structure.layout.height),p&&(n.minWidth[i]=p,n.width[i]=p)}}}.apply(t,n))||(e.exports=a)},4:function(e,t){e.exports=a},5:function(e,t){e.exports=o},540:function(e,t,i){var n,a;n=[i(2),i(0),i(11)],void 0===(a=function(e,t,i){"use strict";var n={trailing:!0},a=function(){return t.throttle(function(e){if(s(this.props)){var i=function(e,i,n){var a=void 0,s={x:(a=o(e.props)?e._cachedBoundingClientRect:e._domNode.getBoundingClientRect()).left+(i.x||0),y:a.top+(i.y||0),width:a.width,height:a.height};s.scale=n,null===e.windowSize&&(e.windowSize=e.props.screenSize);var r={scrollTop:i.y,scrollLeft:i.x,documentHeight:e.props.screenSize.height,documentWidth:e.props.screenSize.width};return t.assign({},s,a,r)}(this,e,t.get(this,"props.siteScale",1));this.sendPostMessage({intent:"addEventListener",eventType:"SCROLL",params:i})}},250,n)};function o(e){return t.get(e,"structure.layout.fixedPosition")||!1}var s=function(e){return!e.rootId||t.includes(e.getRootIdsWhichShouldBeRendered(),e.rootId)};return{propTypes:{getRootIdsWhichShouldBeRendered:e.santaTypesDefinitions.getRootIdsWhichShouldBeRendered,siteScale:e.santaTypesDefinitions.RenderFlags.siteScale,rootId:e.santaTypesDefinitions.Component.rootId,screenSize:e.santaTypesDefinitions.screenSize.isRequired},onScroll:t.noop,getInitialState:function(){return this._domNode=null,this._cachedBoundingClientRect=null,{}},componentDidMount:function(){this._domNode=i.findDOMNode(this),o(this.props)&&(this._cachedBoundingClientRect=this._domNode.getBoundingClientRect())},onResize:function(){o(this.props)&&(this._cachedBoundingClientRect=this._domNode.getBoundingClientRect())},componentWillMount:function(){this._domNode=null,this.onScroll=a()},componentWillUpdate:function(e,t){var i=t.height!==this.state.height||t.width!==this.state.width;o(e)&&i&&(this._cachedBoundingClientRect=null)},componentDidUpdate:function(){null===this._cachedBoundingClientRect&&o(this.props)&&(this._cachedBoundingClientRect=this._domNode.getBoundingClientRect())}}}.apply(t,n))||(e.exports=a)},541:function(e,t,i){var n,a;n=[i(0),i(1),i(326)],void 0===(a=function(e,t,i){"use strict";var n=function(e){i.call(this,e)};return n.prototype=e.assign(new i,{addCacheKiller:function(e){return this.addQueryParam("cacheKiller",e)},addInstance:function(e){return this.addQueryParam("instance",e)},addWidth:function(e){return this.addQueryParam("width",e)},addLocale:function(e){return this.addQueryParam("locale",e)},addLang:function(e){return this.addQueryParam("lang",e)},addDateNumberFormat:function(e){return this.addQueryParam("dateNumberFormat",e)},addIsPrimaryLanguage:function(e){return this.addQueryParam("isPrimaryLanguage",e)},addCurrency:function(e){return this.addQueryParam("currency",e)},addTimeZone:function(e){return this.addQueryParam("tz",e)},addViewMode:function(e){return this.addQueryParam("viewMode",e)},addCompId:function(e){return this.addQueryParam("compId",e)},addDeviceType:function(e){return this.addQueryParam("deviceType",e)},addStandalone:function(e){return this.addQueryParam("standalone",e)},addEndpointType:function(e){return this.addQueryParam("endpointType",e)},addOrigCompId:function(e){return this.addQueryParam("origCompId",e)},addExternalId:function(e){return this.addQueryParam("externalId",e)},addOrigin:function(e){return this.addQueryParam("origin",e)},addPageId:function(e){return this.addQueryParam("pageId",e)},addHeight:function(e){return this.addQueryParam("height",e)},addViewerSessionId:function(e){return this.addQueryParam("vsi",e)},addCbi:function(e){return this.addQueryParam("cbi",e)},addRouterData:function(e,t){try{var i=void 0;return e&&(i=t("sv_tpaDecodeRouterData")?window.btoa(JSON.stringify(e)):JSON.stringify(e)).length<400?this.addQueryParam("routerData",i):this}catch(e){return this}}}),n}.apply(t,n))||(e.exports=a)},542:function(e,t,i){var n,a;n=[i(2)],void 0===(a=function(e){"use strict";return{propTypes:{compData:e.santaTypesDefinitions.Component.compData.isRequired},getBaseUrl:function(){var e=this.getAppData();if(e.widgets){var t=this.props.compData.widgetId,i=e.widgets[t];if(i){var n=this.isInMobileDevMode&&this.isInMobileDevMode();return this.isUnderMobileView()&&(i.mobileUrl&&(n||i.mobilePublished))?i.mobileUrl:i.widgetUrl}}return""}}}.apply(t,n))||(e.exports=a)},543:function(e,t,i){var n;void 0===(n=function(){"use strict";return{requireComponentFromUrl:function(e){return new Promise(function(t,i){return requirejs([e],t,i)})}}}.apply(t,[]))||(e.exports=n)},544:function(e,t,i){var n,a,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n=[i(2),i(0),i(234)],void 0===(a=function(e,t,i){"use strict";return{propTypes:{isExperimentOpen:e.santaTypesDefinitions.isExperimentOpen,getExistingRootNavigationInfo:e.santaTypesDefinitions.getExistingRootNavigationInfo,rootId:e.santaTypesDefinitions.Component.rootId.isRequired,pageUrlWithHash:e.santaTypesDefinitions.pageUrlWithHash.isRequired,pageId:e.santaTypesDefinitions.Component.pageId,compData:e.santaTypesDefinitions.Component.compData.isRequired,isViewerMode:e.santaTypesDefinitions.isViewerMode,currentUrlPageId:e.santaTypesDefinitions.Component.currentUrlPageId,dynamicClientSpecMapAspect:e.santaTypesDefinitions.SiteAspects.dynamicClientSpecMapAspect.isRequired},isTPASection:!0,getSiteUrlStateFromProps:function(e){var t=e.getExistingRootNavigationInfo(e.rootId);return t&&t.tpaInnerRoute||""},getSiteUrlQueryParamsFromProps:function(e){var i=e.getExistingRootNavigationInfo(e.rootId),n=t.get(i,"queryParams.appSectionParams"),a={};if(n)try{a=JSON.parse(n)}catch(e){}return a},mutateSkinProperties:function(e){return"object"===o(e.iframe)&&(e.iframe.src?e.iframe.src=this.buildUrl(this.getBaseUrl()):e.iframe["data-src"]=this.buildUrl(this.getBaseUrl())),e},mutateInitialState:function(e){return e.sectionUrlState=this.getSiteUrlStateFromProps(this.props),e.sectionUrlParams=this.getSiteUrlQueryParamsFromProps(this.props),e.sectionUrl=this.fixSectionUrl(),e},fixSectionUrl:function(){var e=this.props.pageUrlWithHash;return this.endsWith(e,"/")?e:e+"/"},endsWith:function(e,i){return t.endsWith(e,i)},isViewerMode:function(){return"site"===this.getViewMode()},componentWillReceiveProps:function(e){var i=this.getSiteUrlStateFromProps(e),n=this.getSiteUrlQueryParamsFromProps(e);t.isUndefined(this.state.pushState)?e.currentUrlPageId===this.props.pageId&&(this.urlState!==i||this.shouldUpdateState)&&(this.urlState=i,this.shouldUpdateState=!1,this.setState({sectionUrlState:i}),this.props.isExperimentOpen("sv_tpaStateChangedEvent")&&this.reportStateChanged(this.urlState)):(this.urlState=this.state.pushState,this.setState({pushState:void 0}),this.props.isExperimentOpen("sv_tpaStateChangedEvent")&&this.reportStateChanged(this.urlState)),e.currentUrlPageId===this.props.pageId&&this.state.sectionUrlParams!==n&&this.setState({sectionUrlParams:n}),this.props.isExperimentOpen("sv_tpaStateChangedEvent")||this.reportStateChanged(i)},componentDidMount:function(){this.shouldUpdateState=!1,this.props.dynamicClientSpecMapAspect.registerReloadSpecMapPlugin(this.props.pageId,function(){this.shouldUpdateState=!0}.bind(this))},reportStateChanged:function(e){this.isCompListensTo(i.STATE_CHANGED)&&this.sendPostMessage({intent:"addEventListener",eventType:"STATE_CHANGED",params:{newState:e}})},isMobileReady:function(){var e=this.getAppData(),i=this.isInMobileDevMode&&this.isInMobileDevMode(),n=this.props.compData,a=t.get(e,"widgets");if(a&&n.widgetId){var o=a[n.widgetId];return o.mobileUrl&&(i||o.mobilePublished)}return e.sectionMobileUrl&&(i||e.sectionMobilePublished)},mutateIframeUrlQueryParam:function(e){return this.props.isViewerMode?(e["section-url"]=this.fixSectionUrl(),e.target="_top"):(e["section-url"]=this.getBaseUrl(),e.target="_self"),e.width=this.state.initialWidth,e},mutateIframeSrc:function(e){return e=this.addStateToUrlObj(e,this.state.sectionUrlState)},addStateToUrlObj:function(e,t){t&&("#"===t.charAt(0)?e.hash=t:(e.path&&"/"!==e.path.slice(-1)&&(e.path+="/"),e.path+=t));return e}}}.apply(t,n))||(e.exports=a)},545:function(e,t,i){var n,a;n=[i(0),i(167)],void 0===(a=function(e,t){"use strict";var i="fixed";function n(t,i){var n=t,a=i.height.screen,o=i.width.screen,s=i.custom.WIX_ADStop;s&&(n=function(t,i,n){var a,o;return o=i,(a=n).right<o.left||a.left>o.right||a.bottom<o.top||a.top>o.bottom||!e.isNumber(t.top)||(t.top=(t.top||0)+(n.bottom-i.top)),t}(n,function(t,i,n){return{top:e.isNumber(t.top)?e.parseInt(t.top):n-t.height,bottom:e.isNumber(t.bottom)?n-e.parseInt(t.bottom):e.parseInt(t.top)+t.height,right:e.isNumber(t.right)?i-e.parseInt(t.right):e.parseInt(t.left)+t.width,left:e.isNumber(t.left)?e.parseInt(t.left):i-t.width}}(n,o,a),s));return n}function a(a,o,s,r,p){if(p.isMobileView())(function(i,n){var a=i.dataItem,o=n[a.applicationId],s=t.PERMITTED_FULL_SCREEN_TPAS_IN_MOBILE;return o&&e.includes(s,o.appDefinitionId)})(r,p.getClientSpecMap())&&o.css(a,{position:"fixed",margin:"0",top:"0",left:"auto",width:s.width.screen,height:"100%",zIndex:2e3});else{var c=function(t,n,a){var o={};return e.forEach(a,function(a){var s=n[a]&&n[a][t],r=a;e.isUndefined(s)||(0===a.indexOf(i)&&(r=r.slice(i.length).toLowerCase()),o[r]=s)}),o}(a,s,["position","fixedTop","fixedLeft","right","bottom","width","height"]);c=n(c,s),c=e.omit(c,["width","height"]),o.css(a,c)}}return function(){this.patchGluedWidget=a}}.apply(t,n))||(e.exports=a)},546:function(e,t,i){var n,a;n=[i(0),i(547)],void 0===(a=function(e,t){"use strict";var i=300,n=120;function a(e){return"number"==typeof e?e:e&&parseFloat(e)||0}function o(e){return(e>2||e<-2)&&(e=0),e}return{getGluedWidgetMeasurements:function(s,r,p,c,d,u){var l=o(r.props.horizontalMargin),g=o(r.props.verticalMargin),h=r.props.placement||t.getDefaultPlacement(r.data,s),f=function(t,o,s,r,p,c,d,u){c=a(c),d=a(d);var l={},g=void 0;function h(){if(c>=-1&&c<=1){var e=r/2-o/2,t=c*((r-2*n)/2-o/2);l.top=e+t}else if(c<-1&&c>=-2)g=2+c,l.top=g*n;else if(c>1&&c<=2){g=2-c;var i=Math.floor(g*n);l.top=r-i-o}}function f(){if(d>=-1&&d<=1){var e=s/2-t/2,n=d*((s-2*i)/2-t/2);l.left=e+n}else if(d>1&&d<=2){g=2-d;var a=Math.floor(g*i);l.left=s-a-t}else d<-1&&d>=-2&&(g=2+d,l.left=g*i)}switch(p){case"TOP_LEFT":l.top=0,l.left=0,l.bottom="auto";break;case"TOP_RIGHT":l.top=0,l.right=0,l.bottom="auto";break;case"TOP_CENTER":l.top=0,l.bottom="auto",f();break;case"CENTER_RIGHT":l.right=0,h();break;case"CENTER_LEFT":l.left=0,h();break;case"BOTTOM_LEFT":l.bottom=0,l.left=0,l.top="auto";break;case"BOTTOM_CENTER":l.bottom=0,l.top="auto",f();break;case"BOTTOM_RIGHT":default:l.bottom=0,l.right=0,l.top="auto"}return e.defaults(l,{position:u?"absolute":"fixed",top:"0",left:"0"})}(r.layout.width,r.layout.height,p,c,h,g,l,u),m=function(t,i){var n={};return i&&i>0&&e.isNumber(t.bottom)&&t.bottom<i&&(n.bottom=i),n}(f,d||0),v=e.assign(f,m);return 0===v.right&&(v.left=p-r.layout.width),0===v.bottom&&(v.top=c-r.layout.height-(d||0)),v}}}.apply(t,n))||(e.exports=a)},547:function(e,t,i){var n;void 0===(n=function(){"use strict";return{getDefaultPlacement:function(e,t){var i=e.applicationId,n=e.widgetId,a=t[i];if(a){var o=a.widgets[n];if(o)return(o.gluedOptions||{horizontalMargin:0,placement:"BOTTOM_RIGHT",verticalMargin:0}).placement}}}}.apply(t,[]))||(e.exports=n)},548:function(e,t,i){var n,a;n=[i(0),i(10),i(104),i(7),i(31)],void 0===(a=function(e,t,i,n,a){"use strict";return{patchTPASection:function(e,t,o,s,r){var p=o.height[e],c=s.dataItem,d=r.getClientSpecMap()[c.applicationId],u=i.isFullPage(c,d),l=i.isFullPageDesktopOnly(c,d)&&!r.isMobileView();if(d&&(u||l)){var g={position:"fixed",left:"0px",marginLeft:"0px",top:"0px",right:"0px",marginRight:"0px",bottom:"0px"};r.isMobileView()?(p=o.height.screen-o.siteOffsetTop,g=function(e,t,i){var n=t.height.screen-t.siteOffsetTop;return e.height=n+"px",e.minHeight=n+"px",e.top=t.siteOffsetTop+"px",i.isViewerMode()||(e.left=void 0,e.right=void 0),e}(g,o,r)):n.isOpen("displayWixAdsNewVersion",r)&&(g.top=a.spaceCalculationsRegardingWixAds.getFirstUnoccupiedTopCoordinate(o)),t.css(e,g)}var h=o.width[e],f=r.os.ios;o.custom[e].hasIframe&&(n.isOpen("sv_tpaMobileViewportFix",r)&&i.isCurrentPageFullResponsive(r)?t.css(e+"iframe",{position:"fixed",height:"calc(100% - "+o.siteOffsetTop+"px)",left:0}):f&&t.css(e+"iframe",{width:h,height:p}))}}}.apply(t,n))||(e.exports=a)},549:function(e,t,i){var n,a;n=[i(4)],void 0===(a=function(e){"use strict";var t=[],i=1;e.siteAspectsRegistry.registerSiteAspect("tpaPreviewEditorAspect",function(e){"undefined"!=typeof window&&e.registerToMessage(a)});var n=function(e,n,a,o){var s={intent:"TPA_PREVIEW",callId:i++,type:e,compId:a,data:n};return o&&(t[s.callId]=o),s},a=function(e){var i=void 0;try{i=JSON.parse(e.data)}catch(e){return}switch(i.intent){case"TPA_PREVIEW":case"TPA_PREVIEW_RESPONSE":i.callId&&t[i.callId]&&(t[i.callId](i.res),delete t[i.callId])}};return{doPostMessage:function(e,t,i,a){var o=n(e,t,i,a),s=void 0;window.parent.postMessage?s=window.parent:window.parent.document.postMessage&&(s=window.parent.document),s&&void 0!==s&&s.postMessage(JSON.stringify(o),"*")}}}.apply(t,n))||(e.exports=a)},55:function(e,t,i){var n,a;n=[i(0),i(3)],void 0===(a=function(e,t){"use strict";var i={AUTOPLAY:"autoplay",CAMERA:"camera",MICROPHONE:"microphone",LOCATION:"geolocation",VR:"vr"},n=function(t,i){var n=t.getComponentById(i),a=e.get(n,"props.compData");return n&&a&&t.getSiteData().getClientSpecMapEntry(a.applicationId)},a=function(e){return e.getSiteData().getClientSpecMap()},o=function(e){var t=e&&e.instance.split(".")[1];return t&&JSON.parse(window.atob(t))},s=0,r=function(){0===s&&(s=1e3)};return{Constants:{TPA_PUB_SUB_PREFIX:"TPA_PUB_SUB_",MULTI_SECTION_DELIMITER:"$TPA$",TOP_PAGE_ANCHOR_PREFIX:"TOP_PAGE_",ECOM:{APP_DEF_ID:"1380b703-ce81-ff05-f115-39571d94dfcd",PRODUCT_PAGE_WIDGET_ID:"13a94f09-2766-3c40-4a32-8edb5acdd8bc",GALLERY_WIDGET_ID:"1380bba0-253e-a800-a235-88821cf3f8a4",GRID_GALLERY_WIDGET_ID:"13afb094-84f9-739f-44fd-78d036adb028",CART_ICON_WIDGET_ID:"1380bbc4-1485-9d44-4616-92e36b1ead6b"},SOCIAL_BLOG:{APP_DEF_ID:"14bcded7-0066-7c35-14d7-466cb3f09103",SOCIAL_BLOG_WIDGET_ID:"14c1462a-97f2-9f6a-7bb7-f5541f23caa6",CUSTOM_FEED_WIDGET_ID:"14e5b39b-6d47-99c3-3ee5-cee1c2574c89"},CHAT:{APP_DEF_ID:"14517e1a-3ff0-af98-408e-2bd6953c36a2"}},getCacheKiller:t.urlUtils.persistentCacheKiller,getAppData:n,getAppDataByAppDefinitionId:function(t,i){var n=a(t);return e.find(n,{appDefinitionId:i})},getAppDefId:function(e,t){var i=n(e,t);return i?i.appDefinitionId:null},stripPubSubPrefix:function(e){var t=new RegExp("^TPA_PUB_SUB_");return e.replace(t,"")},addPubSubEventPrefix:function(e){return"TPA_PUB_SUB_".concat(e)},isTPASection:function(t){var i=e.get(t,"props.structure.componentType")||e.get(t,"componentType");return"wysiwyg.viewer.components.tpapps.TPASection"===i||"wysiwyg.viewer.components.tpapps.TPAMultiSection"===i},isGluedWidget:function(t){return"wysiwyg.viewer.components.tpapps.TPAGluedWidget"===(e.get(t,"props.structure.componentType")||e.get(t,"componentType"))},sdkVersionIsAtLeast:function(t,i){t=t||"0.0.0",i=i||"1.41.0";var n=e.map(t.split("."),function(e){return parseInt(e,10)}),a=e.map(i.split("."),function(e){return parseInt(e,10)});return 3===n.length&&3===a.length&&n[0]>=a[0]&&n[1]>=a[1]&&n[2]>=a[2]},getVisitorUuid:function(t){var i=t.cookieUtils.getCookie("_wixUIDX")||"";return i=(i=i.slice(e.lastIndexOf(i,"|")+1)).replace(/^(null-user-id|null)$/g,"")},getInstanceFromClientSpecMap:function(e,t){return o(e[t])},getInstanceFromAppData:o,getClientSpecMap:a,incAppCounter:function(){++s},decAppCounter:function(e,t){--s,r(e,t)},reportAppCounter:r,isPageMarkedAsHideFromMenu:function(t,i){if(t&&i){e.includes(i,"$TPA$")&&(i=i.substr(0,i.indexOf("$TPA$")));var n=e.find(t.widgets,function(t){return e.get(t,"appPage.id")===i});return!!n&&e.get(n,"appPage.hideFromMenu")}return!1},getDebuggingParamsFromUrl:function(t){var i={},n=e.get(t,"query.petri_ovr");n&&(i.petri_ovr=n);var a=e.get(t,"query.debugApp");return a&&(i.debugApp=a),i},appendProtocolToUrlIfNeeded:function(i,n){if(!/^https?/.test(i)){var a=e.get(n,"protocol","http:");return t.urlUtils.addProtocolIfMissing(i,a)}return i},getIFramePermissions:function(){return e(i).values().join("; ")},isBlog:function(e){return"14bcded7-0066-7c35-14d7-466cb3f09103"===e.getAppData().appDefinitionId},isEcom:function(e){return"1380b703-ce81-ff05-f115-39571d94dfcd"===e.getAppData().appDefinitionId}}}.apply(t,n))||(e.exports=a)},550:function(e,t,i){var n,a;n=[i(0)],void 0===(a=function(e){"use strict";var t={TPA_MESSAGE:"TPA",TPA_MESSAGE_PREVIEW:"TPA_PREVIEW",TPA_MESSAGE2:"TPA2",TPA_RESPONSE:"TPA_RESPONSE",TPA_PREVIEW_RESPONSE:"TPA_PREVIEW_RESPONSE",PINGPONG_PREFIX:"pingpong:"},i=function(e,t,i){var n="";try{n=JSON.stringify(t)}catch(e){return}e.postMessage||(e=e.contentWindow),e.postMessage(n,i||"*")},n=function(e,n,a){return function(o){try{i(e,{intent:a||t.TPA_RESPONSE,callId:n.callId,type:n.type,res:o,status:!0})}catch(e){}}},a=function(e){return e===t.TPA_MESSAGE||e===t.TPA_MESSAGE2},o=function(e,t,i){var n=!0;return t.isExperimentOpen("sv_postmessage_security")&&(n=r(e,t,i)||s(t,i)||p(t,i)),n},s=function(e,t){return 0===(e.getPageUrl()||"").indexOf(t)},r=function(t,i,n){var a=i.getComponentById(t);return 0===e.get(a,"refs.iframe.src","").indexOf(n)},p=function(e,t){var i=e.getSiteData().getServiceTopologyProperty("baseDomain")||"";return i=i.replace(/\./gi,"\\."),new RegExp("[./]{1}"+i+"$","ig").test(t)};return{Intents:t,callPostMessage:i,generateResponseFunction:n,isTPAMessage:a,fixOldPingPongMessageType:function(e){return e.replace(t.PINGPONG_PREFIX,"")},handleTPAMessage:function(i,s,r,p){var c=function(e){var t=void 0;try{e.data?t=JSON.parse(e.data):e.originalEvent&&e.originalEvent.data&&(e=e.originalEvent,t=JSON.parse(e.data))}catch(e){}return t}(p),d=p.originalEvent?p.originalEvent.origin:p.origin;if(c&&a(c.intent)){if(i)r(i,c,n(p.source,c));else if(o(c.compId,s,d)){var u=function(e){return e.getSiteData().viewMode}(s);!function(e,t){return!("preview"===e&&{getSectionUrl:!0,siteInfo:!0,navigateToPage:!0,getExternalId:!0,smRequestLogin:!0,getValue:!0,getValues:!0,getCurrentPageAnchors:!0,getComponentInfo:!0,navigateToSectionPage:!0,isAppSectionInstalled:!0,getStateUrl:!0,getSitePages:!0,getSiteMap:!0,smCurrentMember:!0,refreshCurrentMember:!0,onReady:!0}[t.type])}(u,c)&&function(t){return"preview"===t.getSiteData().viewMode&&e.get(window,"documentServices.tpa.__privates.areDocumentServicesHandlersReady")&&window.documentServices.tpa.__privates.areDocumentServicesHandlersReady()}(s)||(c.origin="site"===u?"viewer":u,r(s,c,n(p.source,c)))}}else c&&c.intent===t.TPA_MESSAGE_PREVIEW&&(i?r(i,c,n(p.source,c,t.TPA_PREVIEW_RESPONSE)):o(c.compId,s,d)&&r(s,c,n(p.source,c,t.TPA_PREVIEW_RESPONSE)))}}}.apply(t,n))||(e.exports=a)},551:function(e,t,i){var n,a;n=[i(10),i(0),i(3),i(24),i(4),i(1),i(11),i(12),i(328),i(327),i(104),i(552),i(55),i(233),i(553),i(1798),i(1799),i(554),i(167),i(325),i(7)],void 0===(a=function(e,t,i,n,a,o,s,r,p,c,d,u,l,g,h,f,m,v,y,I,S){"use strict";var P=o.logger,A=r.tpaWarmup,T=y.PERF_CATEGORY,D=a.activityTypes.TPAActivity,C=a.activityService,w="QUICK_ACTION_BAR",E="notifyWidget";function b(e){return e.getSiteAspect("siteMembers")}var _=function(e,t,i){var n={},a=e.getSiteData().getDataByQuery(e.getSiteData().getCurrentUrlPageId()),o=e.getSiteData().getCurrentUrlPageTitle();l.sdkVersionIsAtLeast(t.version,"1.42.0")?n.pageTitle=o:(n.siteTitle=o,n.pageTitle=a.title),n.pageTitleOnly=e.getSiteData().getCurrentUrlPageName(),n.siteDescription=a.descriptionSEO,n.siteKeywords=a.metaKeywordsSEO;var s=e.getSiteData().currentUrl;n.url=s.full,n.baseUrl=e.getSiteData().getExternalBaseUrl(),n.referer=window.document.referrer,i(n)},M=function(e,t){e&&e({error:{message:t}})},R=function(e,i,n){var a={filterHideFromMenuPages:!0,includePagesUrl:t.get(i,"data.includePagesUrl",!1),includeIsHomePage:!0,enhancedInfo:!1};n(p.getSitePagesInfoData(e.getSiteData(),a))},O=function(e,t,i){i(p.getSitePagesInfoData(e.getSiteData(),{filterHideFromMenuPages:!0,includePagesUrl:!1,includeIsHomePage:!1,enhancedInfo:!0}))},x=function(e,i,n){var a=void 0,o=e.getComponentById(i.compId),s=t.get(i,"data.sectionIdentifier.appDefinitionId");s?a=l.getAppDataByAppDefinitionId(e,s):o&&(a=o.getAppData());var r=t.get(a,"applicationId"),p=c.mapPageToWidgets(e),d=t.get(p,r),g=e.getSiteData().getPrimaryPageId();u.navigateToSection(e,a,i,d,g,function(i){var n=e.getComponentsByPageId(i),a=t.find(n,"isTPASection");return t.get(a,"props.id")},e.getSiteData().isDynamicPage,n,t.partial(ce,e,a))},U=function(e,i,n,a,o){var s=e.getSiteData();if(a=a||s.getFocusedRootId(),(i=i||k(e,n,a))&&(N(i)||i.props.rootId===a)){var r=B(i,e);s.animations.animate("BaseScroll",e.getSiteContainer(),1,0,{y:r.y,x:r.x,callbacks:{onComplete:o}})}else{o({error:{message:(t.isEmpty(a)?"Current page":'Page id "'+a+'"')+' does not contain the component id "'+n+'".'}})}},N=function(e){return"masterPage"===e.props.rootId},k=function(e,t,i){return e.getComponentsByPageId(i)[t]},B=function(e,i){var n=i.getSiteData(),a=s.findDOMNode(e),r=n.measureMap.siteMarginTop||0,p=o.domMeasurements.getElementRect(a),c=p.top+r;t.get(n,"measureMap.custom.SITE_HEADER.isFixedPosition")&&(c-=n.measureMap.height.SITE_HEADER);var d=o.scrollAnchors.normalizeYOffset(c,n);return{x:p.left,y:d}},L=function(e,i){var n=e.getBoundingClientRect(),a=t(n).pick(["left","right","top","bottom","height","width"]).mapValues(function(e){return Math.floor(e)}).value();return i&&(a.top-=i),a},W=function(e,t){return{x:e.left,y:e.top-t}},G=function(e){return t.isString(e)&&/^[0-9]+%$/.test(e)},F=function(e,t){var i=t.data.eventKey;if("QUICK_ACTION_TRIGGERED"!==i){var n=e.getComponentById(t.compId);n&&n.isCompListensTo&&!n.isCompListensTo(i)&&n.startListen(i)}else!V(e,i,t.compId)&&e.getSiteData().isViewerMode()&&H(e,t.compId)},V=function(e,i,n){var a=K(e,n),o=e.getRuntimeDal().getActionsAndBehaviors(w),s=t(o).filter({action:{sourceId:w,name:a}}).filter({behavior:{targetId:n}}).filter({behavior:{name:E}}).value();return!t.isEmpty(s)},H=function(e,t){var i=function(e,t){return{action:{type:"comp",name:t,sourceId:w},behavior:{type:"comp",targetId:e,name:E,params:{sourceId:w,action:t}}}}(t,K(e,t));e.getRuntimeDal().addActionsAndBehaviors(w,i)};var q=function(e,t){var i=t.data.eventKey||t.data;if("QUICK_ACTION_TRIGGERED"!==i){var n=e.getComponentById(t.compId);n&&n.stopListen(i)}else z(e,t.compId)},z=function(e,t){var i=K(e,t);e.getRuntimeDal().removeActionsAndBehaviors(w,{action:{name:i}})};function K(e,i){var n=e.getComponentById(i),a=t.get(n,"props.compData.applicationId");return e.getSiteData().getClientSpecMap()[a].appDefinitionId}var Q=function(e,i,n,a){if(l.isTPASection(i)){i.setState({pushState:a});var o=i.getAppData(),s=t.get(i,"props.compData.widgetId")||t.get(d.getMainSectionWidgetData(o),"widgetId"),r=e.getSiteData().getPrimaryPageId();u.navigateWithoutClosingPopupIfPossible(e,{pageId:n,tpaInnerRoute:a,transition:"none"},r,void 0,void 0,void 0,t.partial(ce,e,o,s,i.props.id))}},j=function(e,t,i,n){i.getMemberDetails(function(t){null!==t?(n(t),e&&e.setSiteMemberDataState(null)):e?e.setSiteMemberDataState({callback:n}):n(null)})},Y=function(e,t,i){var n=e.getComponentById(t.compId),a=b(e);a.isLoggedIn()?j(n,0,a,function(e){i(e)}):i(null)},X=function(e,i){var n=t.get(i,"data.pixelId"),a=t.get(i,"data.pixelType");n&&"FACEBOOK"===a&&e.initFacebookRemarketing(n)},J=function(e,i){var n=t.get(i,"data",{}),a=t.get(i,"data.eventName");a&&(delete n.eventName,e.fireFacebookRemarketingPixel(a,n))},$=function(e){var t=e.getSiteData();return{hubSecurityToken:t.getHubSecurityToken(),svSession:t.getSvSession(),metaSiteId:t.getMetaSiteId(),currentUrl:t.getCurrentUrl()}},Z=function(e,i){var n=l.getAppData(e,i.compId),a=i.data;return{type:t.get(a,"activity.type")||"TPA",appDefinitionId:n.appDefinitionId||"TPA",info:t.get(a,"activity.info")||{},details:t.get(a,"activity.details")||{},contactUpdate:t.get(a,"activity.contactUpdate")||{},instance:n.instance}},ee=function(e,n,a){var o=l.getAppDefId(e,n.compId);i.loggingUtils.performance.start("appIsAlive "+o,T);var s=e.getComponentById(n.compId);if(s&&s.setAppIsAlive&&s.setAppIsAlive(),t.get(s,"hasOrigComponent"))try{a(te(e,s)),i.loggingUtils.performance.finish("appIsAlive "+o,T),i.loggingUtils.performance.finish("getStyleParams "+o,T)}catch(t){e.reportBI(I.APP_IS_ALIVE_ERROR,{app_id:o,errorMessage:t.toString()})}},te=function(e,i){var n=e.getSiteData(),a=n.getAllStylesFromPossiblyRenderedRoots(),s=i&&i.hasOrigComponent()?e.getComponentById(i.getOrigComponentId()):i,r=t.get(s,"props.structure.styleId"),p=n.rendererModel.siteInfo.documentType,c=n.getDataByQuery("masterPage").characterSets,d=n.isVisualFocusEnabled(),u=o.styleUtils.getStyleDataToPassIntoApp(r,a,n.santaBase,p,c,n.serviceTopology,!0);return t.assign(u,{isVisualFocusEnabled:d})},ie=function(e,t,i){var n=e.getComponentById(t.compId).props.compData,a=e.getRootOfComponentId(t.compId);i(A.tpaDataService.getValue(e.getSiteData(),t,a,n))},ne=function(e,i,n){var a=t.uniq(i.data.keys),o=e.getSiteData(),s=e.getRootOfComponentId(i.compId),r=e.getComponentById(i.compId,s).props.compData,p=i.data.scope,c=void 0;if(p===A.tpaDataService.SCOPE.APP){var d=A.tpaDataService.getTpaDataContent(o,"tpaData-"+r.applicationId,"masterPage");c=t.pick(d,a)}else{var u=A.tpaDataService.getTpaDataContent(o,r.tpaData,s);c=t.pick(u,a)}if(!t.isEmpty(c)&&t(c).keys().isEqual(a))n(c);else{var l=t.keys(c);n({error:{message:"keys "+t(l).xor(a).intersection(a).value()+" not found in "+p+" scope"}})}},ae=function(e,i){return{width:t.get(e,"measureMap.width.WIX_ADS"+i),height:t.get(e,"measureMap.height.WIX_ADS"+i),top:t.get(e,"measureMap.top.WIX_ADS"+i),left:t.get(e,"measureMap.left.WIX_ADS"+i)}};function oe(e,i,n){var a=null,o=e.getComponentById(i,n);if(o){var s=t.get(o.props,"compData.applicationId")||null;a=e.getSiteData().getClientSpecMapEntry(s)||null}return a||{}}var se=function(e,t){var i=e.getComponentById(t).props.compData;return i&&i.id},re=function(e,i,n){var a=e.getSiteData(),o=void 0,s=t.get(i,["data","appDefinitionId"]);s?o=d.getAppDataByAppDefinitionId(a,s):o=e.getComponentById(i.compId).getAppData();var r=t.get(o,"applicationId"),p=c.mapPageToWidgets(e),u=t.get(p,r);n(t.some(u,{tpaPageId:t.get(i,["data","sectionId"])}))},pe=function(e,i,n){var a=e.getSiteData(),o=t.get(i,["data","appDefinitionId"]),s=d.getAppDataByAppDefinitionId(a,o);if(s){var r=s.instance.split(".");n(JSON.parse(atob(r[1])).vendorProductId)}else n(null)},ce=function(e,i,n,a){var o=e.getSiteData().biData,s=o.getTime(),r={compId:a,pageId:o.getPageId(),pageNo:o.getPageNumber(),loadingTime:s.loadingTime,totalLoadingTime:s.totalLoadingTime};t.get(i,"isWixTPA")?(r.widgetId=n,r.appDefinitionId=t.get(i,"appDefinitionId")):(r.externalWidgetId=n,r.externalAppDefinitionId=t.get(i,"appDefinitionId")),P.reportBI(e.getSiteData(),I.APP_STATE_CHANGED,r)};return t.merge({waitForWixCodeWorkerToBeReady:function(e,t,i){var n=e.getSiteAspect("WidgetAspect"),a=e.getSiteData(),o=a.getCurrentUrlPageId(),s=S.isOpen("sv_handleFailingWixCodeSdk",a)?n.isContextReadyOrLifeCycleFailed(o):n.isContextReady(o),r=e.getSiteAspect("wixCodeWidgetAspect");r&&r.isAppInitiated()?s?i({}):n.registerToOnWidgetReady(o,function(){i({})}):i({error:!0})},siteInfo:_,heightChanged:function(e,i){var n="number"==typeof i.data?i.data:i.data.height;if(n>1e6){var a={height:n};P.reportBI(e.getSiteData(),g.SDK_SET_HEIGHT_ERROR,a)}var o={height:n,ignoreAnchors:i.data.overflow},s=e.getComponentById(i.compId);t.invoke(s,"registerReLayout"),t.invoke(s,"setState",o)},registerEventListener:F,removeEventListener:q,navigateTo:function(e,n,a){var o=t.get(n,"data.link");i.linkUtils.navigateToLink(e,o,a)},navigateToPage:function(e,i,n){var a=e.getSiteData().getPrimaryPageId(),s=e.getSiteData().getAllPageIds();u.navigateToPage(e,i,a,s,function(t){var i=l.Constants.TOP_PAGE_ANCHOR_PREFIX+t;return o.scrollAnchors.getPageAnchors(e.getSiteData(),t,i)},t.partial(se,e),n)},smRequestLogin:function(e,i,n){var a=e.getComponentById(i.compId),o=b(e);if(o.isLoggedIn())j(a,0,o,function(e){n({authResponse:!0,data:e})});else{var s=t.get(i,"data.mode"),r=s&&"login"===s,p=t.get(i,"data.language","en"),c=void 0;t.get(i,"data.callOnCancel")&&(c=function(){n({wasCancelled:!0})}),o.showAuthenticationDialog({successCallback:function(e){n({authResponse:!0,data:e})},cancelCallback:c,language:p,showLoginDialog:r,appId:l.getAppDefId(e,i.compId),checkCommunityCheckbox:t.get(i,"data.checkCommunityCheckbox")})}},smCurrentMember:Y,refreshCurrentMember:function(e){var t=b(e);t.isLoggedIn()&&t.getMemberDetails(null,null,!0)},authorizeMemberPages:function(e,t,i){var n=b(e),a=i;n.isLoggedIn()&&n.authorizeMemberPages(a,function(){return i({error:{message:"Failed to get authorized pages"}})})},scrollBy:function(e,t,i){e.scrollSiteBy(t.data.x,t.data.y,i)},scrollTo:function(e,i,n){i.data.scrollAnimation?e.getSiteData().animations.animate("BaseScroll",e.getSiteContainer?e.getSiteContainer():e._site.props.getSiteContainer(),1,0,{y:i.data.y,x:i.data.x,callbacks:{onComplete:function(){n&&n()}}}):e.getSiteAspect("windowScrollEvent").scrollSiteTo(i.data.x,i.data.y,t.isFunction(n)&&n)},navigateToComponent:function(e,n,a){var o=n.data.pageId,s=n.data.compId,r=e.getSiteData().getFocusedRootId(),p=e.getComponentById(s);if(p&&"wysiwyg.viewer.components.tpapps.TPAGluedWidget"===p.props.structure.componentType)a({error:{message:"Navigation to glued widget not supported."}});else if(t.isEmpty(o)||o===r)U(e,p,s,o,a);else{var c=e.getSiteData().getAllPageIds();i.linkUtils.navigateToPage(e,o,c,n.data.noPageTransition,void 0,U.bind(null,e,p,s,o,a),a)}},registerCampaignPixel:X,reportCampaignEvent:J,postActivity:function(e,t){var i=e.getComponentById(t.compId),n=$(e),a=Z(e,t),o=function(e){i.sendPostMessage({intent:"TPA_RESPONSE",callId:t.callId,type:t.type,res:{response:{activityId:e.response.activityId,contactId:e.response.contactId},status:e.status},status:e.status,compId:t.compId})},s=new D(n,a);C.reportActivity(e.getSiteData().getExternalBaseUrl(),s,function(t){t.userSessionToken&&e.setUserSession(t.userSessionToken),o({status:!0,response:t})},function(e){var t={status:e.status,statusText:e.statusText,responseText:e.responseText};o({status:!1,response:t})})},getCurrentPageId:function(e,t,i){i(e.getSiteData().getCurrentUrlPageId())},getCurrentPageNavigationInfo:function(e,t,i){var n=e.getSiteData().getRootNavigationInfo(),a={};n.routerDefinition?(a.innerRoute=n.innerRoute,a.type="DynamicPageLink",a.routerId=n.routerDefinition.routerId):(a.type="PageLink",a.pageId=n.pageId),i(a)},getUserSession:function(e,t,i){i(e.getUserSession())},boundingRectAndOffsets:function(i,n,a){var o=i.getSiteData(),r=i.getComponentById(n.compId),p=s.findDOMNode(r),c=0;t.get(o,"measureMap.custom.SITE_HEADER.isFixedPosition")&&(c=o.measureMap.height.SITE_HEADER);var d=i.getRenderFlag("siteScale")||1;a({rect:L(p,c),offsets:W(e(p).offset(),c),scale:d})},navigateToSectionPage:x,getSitePages:R,getSiteMap:O,appIsAlive:ee,openModal:function(e,t,i){var n=t.data||{};v.openModal(e,t.compId,n.url,n.width,n.height,n.theme,i,n.title)},openPopup:function(e,t,i){var n=t.data||{};v.openPopup(e,t.compId,n.url,n.width,n.height,n.theme,n.position,!1,i)},openPersistentPopup:function(e,t,i){var n=t.data,a=n.url,o=n.width,s=n.height,r=n.theme,p=n.position;v.openPopup(e,t.compId,a,o,s,r,p,!0,i)},closeWindow:function(e,t){var i=e.getComponentById(t.compId);i&&i.hide&&i.hide(t.data)},setFullScreenMobile:function(e,i,n){if(e.getSiteData().isMobileView()){var a=i.data.isFullScreen,o=i.compId,s=e.getComponentById(o);!function(e,i){var n=oe(e,i);return t.includes(y.PERMITTED_FULL_SCREEN_TPAS_IN_MOBILE,n.appDefinitionId)}(e,o)?n&&n():a?(e.enterFullScreenMode(),e.setSiteRootHiddenState(!0),s.enterFullScreen(n)):(e.setSiteRootHiddenState(!1),e.exitFullScreenMode(),s.exitFullScreen(n))}else n({error:{message:"show full screen is only available in Mobile view"}})},resizeWindow:function(e,i,n){var a=i.data.width,o=i.data.height;G(a)||(a=parseFloat(a)),G(o)||(o=parseFloat(o));var s=e.getComponentById(i.compId);(function(e){return e&&e.resizeWindow&&t.includes(["wysiwyg.viewer.components.tpapps.TPAGluedWidget","wysiwyg.viewer.components.tpapps.TPAPopup","wysiwyg.viewer.components.tpapps.TPAModal"],e.props.structure.componentType)})(s)&&s.resizeWindow(a,o,n)},appStateChanged:function(e,t){var i="string"==typeof t.data?t.data:t.data.state,n=e.getComponentById(t.compId),a=void 0,s=e.getRootOfComponentId(t.compId),r=e.getSiteData().getExistingRootNavigationInfo(s),p=r?r.pageId:s;try{switch((a=JSON.parse(i)).cmd){case"zoom":n.processImageZoom(a);break;case"itemClicked":n.processItemClicked(a);break;case"itemChanged":n.processItemChanged(a);break;case"componentReady":n.setComponentInIframeReady();break;case"navigateToDynamicPage":var c=a.args[0],d=o.wixUrlParser.getUrl(e.getSiteData(),c),u=o.wixUrlParser.parseUrl(e.getSiteData(),d);a.args[1]&&(u.anchorData=a.args[1]),e.handleNavigation(u,a.args[2]);break;case"navigateToAnchor":var l=a.args[0],g=a.args[1];e.getSiteData().getPrimaryPageId()===l?g&&e.scrollToAnchor(g):e.navigateToPage({pageId:l,pageAdditionalData:null,anchorData:g});break;default:Q(e,n,p,i)}}catch(t){Q(e,n,p,i)}},getSectionUrl:function(e,i,n){var a=e.getComponentById(i.compId);if(a){var o=c.mapPageToWidgets(e),s=e.getSiteData().getClientSpecMap()[a.props.compData.applicationId],r=s.applicationId;if(t.isEmpty(o)||t.isUndefined(o[r]))n({error:{message:'Page with app "'+s.appDefinitionName+'" was not found.'}});else{var p=o[r],d=i.data.sectionIdentifier,u=t.find(p,{tpaPageId:d})||p[0],l=void 0;if(u&&(l=u.pageId),t.isUndefined(l))n({error:{message:"Page was not found."}});else{var g=e.getPageUrlFor(l);t.isUndefined(g)?n({error:{message:"Page was not found."}}):n({url:g})}}}else n({error:{message:"Component was not found."}})},postCountersReport:function(e,i,n){i.data.messageId=Date.now();var a={ctToken:e.getSiteData().getCTToken()},s=t.omit(i.data,"version"),r="//player-counters.wix.com/collector/rest/collect-js?"+o.urlUtils.toQueryString(a);o.ajaxLibrary.ajax({type:"OPTIONS",url:r,data:JSON.stringify(s),dataType:"json",contentType:"application/json",success:function(e){n({status:"success",response:e})},error:function(e){var t=e&&e.responseText;n({status:"error",response:t})}})},getExternalId:function(e,t,i){var n=e.getComponentById(t.compId);n&&i(n.props.compData.referenceId)},getViewMode:function(e,t,i){i({editMode:e.getSiteData().isViewerMode()?"site":e.getRenderFlag("componentViewMode")})},getValue:ie,getValues:ne,getCurrentPageAnchors:function(e,t,i){var n=e.getSiteData().getCurrentUrlPageId(),a=l.Constants.TOP_PAGE_ANCHOR_PREFIX+n,s=o.scrollAnchors.getPageAnchors(e.getSiteData(),n,a);h.getCurrentPageAnchors(e,t,n,s,i)},navigateToAnchor:function(e,i,n){var a=e.getSiteData().getCurrentUrlPageId(),s=l.Constants.TOP_PAGE_ANCHOR_PREFIX+a,r=o.scrollAnchors.getPageAnchors(e.getSiteData(),a,s);h.navigateToAnchor(e,i,a,r,t.partial(se,e),n)},getStateUrl:function(e,i,n){var a=e.getComponentById(i.compId);if(!a)return n({error:{message:"Component was not found."}});var s=c.mapPageToWidgets(e),r=e.getSiteData().getClientSpecMap()[a.props.compData.applicationId],p=r.applicationId;if(t.isEmpty(s)||t.isUndefined(s[p]))return n({error:{message:'Page with app "'+r.appDefinitionName+'" was not found.'}});var d=s[p],u=t.find(d,{tpaPageId:i.data.sectionId}),l=void 0;return l=u?{pageId:u.pageId,tpaInnerRoute:i.data.state}:{pageId:d[0].pageId},e.getSiteData().isDynamicPage(l.pageId)?n({error:{message:"Can't retrieve url for a dynamic page. Please use the platform app API instead."}}):n({url:o.wixUrlParser.getUrl(e.getSiteData(),l,void 0,!0)})},getComponentInfo:function(e,i,n){var a=e.getComponentById(i.compId),o=a.props.compData,s=a.getAppData(),r=N(a),p=o.widgetId?s.widgets[o.widgetId]:d.getMainSectionWidgetData(s);n({compId:i.compId,showOnAllPages:r,pageId:r?"":a.props.pageId,tpaWidgetId:t.get(p,"tpaWidgetId",""),appPageId:t.get(p,"appPage.id","")})},getStyleId:function(e,t,i){i(e.getComponentById(t.compId).props.structure.styleId)},getStyleParamsByStyleId:function(e,i,a){var s=e.getSiteData(),r=i.data.styleId,p=i.data.pageId,c=s.getAllStylesFromPossiblyRenderedRoots(),d=function(){if(t.isUndefined(c[r]))a({error:{message:'Style id "'+r+'" was not found.'}});else{var e=s.rendererModel.siteInfo.documentType,i=s.getDataByQuery("masterPage").characterSets,n=o.styleUtils.getStylesForSDK(c,r,!0,s.serviceTopology,e,i,!0);a(n)}},u=function(){var e;(e=s.getDataByQuery(r,p,"theme_data"))&&(c[r]=e),d()};if(t.isUndefined(c[r])&&p)if(s.pagesDataRaw.pagesData[p])u();else{var l=n.dataRequirementsChecker.getRequestsForPages(s,s.pagesDataRaw,{pageId:p});s.store.loadBatch(l,u)}else d()},replaceSectionState:function(e,i){var n=e.getComponentById(i.compId),a=i.data,o=a.state,s=a.queryParams,r=e.getRootOfComponentId(i.compId);if(l.isTPASection(n)){n.setState({pushState:o});var p=n.getAppData(),c=e.getSiteData().getPrimaryPageId(),g=t.get(n,"props.compData.widgetId")||t.get(d.getMainSectionWidgetData(p),"widgetId"),h=t.partial(ce,e,p,g,i.compId),f={pageId:r,tpaInnerRoute:o,transition:"none"};u.addAppSectionParamsToNavInfo(s,f),u.navigateWithoutClosingPopupIfPossible(e,f,c,!1,!0,void 0,h)}},logOutCurrentMember:function(e,i,n){var a=b(e);if(a.isLoggedIn()){var o=t.get(i,"data.language");a.logout(o)}else n({onError:"No member is logged in"})},getCtToken:function(e,i,n){t.isFunction(n)&&n(e.getSiteData().getCTToken())},setPageMetadata:function(e,i,n){var a=e.getComponentById(i.compId);if(a){var o=K(e,i.compId)===l.Constants.CHAT.APP_DEF_ID,s=l.isTPASection(a)||o,r=t.get(a,"props.pageId")===e.getSiteData().getCurrentUrlPageId()||o;if(!s)return void M(n,"Setting a page meta data is possible only to TPA Sections and MultiSections");if(!r)return void M(n,"Setting a page meta data is possible only to component that is located on the current page");var p=o?t.pick(t.get(i,"data"),["title","fullTitle"]):t.get(i,"data"),c=e.getPageData(),d=t.get(c,"title",""),u=t.get(p,"title"),g=t.get(p,"fullTitle"),h=t.get(p,"description")||t.get(c,"descriptionSEO",""),f=t.get(e.getSiteData(),"rendererModel.siteInfo.siteTitleSEO"),m=void 0;if(g){var v=a.getAppData();if(t.get(v,"isWixTPA"))return void e.setRunTimePageTitle(d,h,g)}u&&(m=S.isOpen("sv_tpaSetPageMetadata",e.getSiteData())?u+" | "+f:f+" | "+u),e.setRunTimePageTitle(d,h,m)}},setAppMetadata:function(e,i,n){var a=e.getComponentById(i.compId);if(a){var o=a.getAppData(),s=t.get(o,"isWixTPA"),p=l.isTPASection(a),c=t.get(a,"props.pageId")===e.getSiteData().getCurrentUrlPageId();if(!s)return;if(!p)return void M(n,"Setting an app meta data is possible only for TPA Sections and MultiSections");if(!c)return void M(n,"Setting an app meta data is possible only for components that are located on the current page");var d=t.reduce(r.constants.TPA_LINK_TAGS.SUPPORTED_RELS,function(e,n){var a=t.get(i,"data."+n+".href");return a&&(e[n]=a),e},{});return e.setRunTimeLinkTags(d)}},removeAppMetadata:function(e,i,n){var a=e.getComponentById(i.compId);if(a){var o=a.getAppData(),s=t.get(o,"isWixTPA"),p=l.isTPASection(a),c=t.get(a,"props.pageId")===e.getSiteData().getCurrentUrlPageId();if(!s)return;if(!p)return void M(n,"Removing an app meta data is possible only for TPA Sections and MultiSections");if(!c)return void M(n,"Removing an app meta data is possible only for components that are located on the current page");var d=t.reduce(t.get(i,"data"),function(e,i,n){return i&&t.includes(r.constants.TPA_LINK_TAGS.SUPPORTED_RELS,n)&&e.push(n),e},[]);return e.removePageSEORuntimeData(d)}},applicationLoaded:f.applicationLoaded,applicationLoadingStep:f.applicationLoadingStep,getAdsOnPage:function(e,t,i){var n=e.getSiteData();n.shouldShowWixAds()?S.isOpen("displayWixAdsNewVersion",n)?i({top:ae(n,"top")}):n.isMobileView()?i({top:ae(n,"top")}):i({top:ae(n,"top"),bottom:ae(n,"bottom")}):i({})},setMobileActionBarButton:function(e,i,n){var a=oe(e,(i=i||{}).compId).appDefinitionId;a||n({error:{message:"No matching app definition found for comp id "+i.compId}});var o=function(e){var i={};return t.isBoolean(e.visible)&&(i.enabled=e.visible),t.isBoolean(e.notifications)&&(i.notificationCount=e.notifications?1:0),t.isString(e.color)&&(i.color=e.color),i}(i.data||{});!t.isEmpty(o)&&(o.appId=a,function(e){return e.getSiteAspect("QuickActionBarAspect")}(e).updateDynamicActions(o)),n&&n()},isAppSectionInstalled:re,getAppVendorProductId:pe,hasLoginOnPage:function(e,i,n){var a="wysiwyg.viewer.components.LoginSocialBar",o=e.getSiteData().getFocusedRootId(),s=e.getComponentsByPageId(o),r=t.some(s,["props.structure.componentType",a]);r||e.isPageLandingPage(o)||e.getSiteData().isPopupPage(o)||(s=e.getComponentsByPageId("masterPage"),r=t.some(s,["props.structure.componentType",a])),n(r)},registerApi:function(e,i){var n=e.getComponentById(i.compId),a=t.get(n.getIframe(),"id");e.getSiteAspect("TPARPCAspect").registerApi(a,i.compId)},requireSingletonAPI:function(e,i,n){var a=t.get(i.data,"appDefId"),o=t.get(i.data,"componentType");e.getSiteAspect("TPARPCAspect").requireSingletonAPI(a,o,n)},trackEvent:function(e,i){var n=t.get(i,"data.eventName"),a=t.get(i,"data.params"),s=t.get(i,"data.options");o.integrations.promoteAnalytics.trackEvent(e,n,a,s)},revalidateSession:function(e,i,n){var a=e.getComponentById(i.compId).getAppData(),o=t.get(a,"applicationId");e.getSiteAspect("dynamicClientSpecMap").getNewAppInstance(o,function(e){n(e?{instance:e}:{error:{message:"Error getting new instance from server"}})})},onReady:function(e,t,i){e.registerToOnFullyRendered(i)},echo:function(e,t,i){i()},getApplicationFields:function(e,i,n){var a=t.get(i.data,"appDefinitionId"),o=t(e.getSiteData().getClientSpecMap()).values().find({appDefinitionId:a});n(t.get(o,"appFields",{}))},tpaWorker:{siteInfo:_,getSitePages:R,getSiteMap:O,removeEventListener:q,registerEventListener:F,registerCampaignPixel:X,reportCampaignEvent:J,smCurrentMember:Y,appIsAlive:ee,navigateToSectionPage:x,getValue:ie,getValues:ne,applicationLoaded:f.applicationLoaded,applicationLoadingStep:f.applicationLoadingStep,isAppSectionInstalled:re,getAppVendorProductId:pe}},m)}.apply(t,n))||(e.exports=a)},552:function(e,t,i){var n,a;n=[i(0),i(3),i(233),i(553),i(104)],void 0===(a=function(e,t,i,n,a){"use strict";var o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments[1];if(!e.isEmpty(t))try{i.queryParams={appSectionParams:JSON.stringify(t)},i.hasAppSectionParams=!0}catch(e){}},s=function(e,t,i,n,a){if(i){var o=e.getSiteAspect("tpaCompStateAspect");t?(o.updateSectionUrlState(i,n),o.updateSectionUrlParams(i,a)):(o.updatePushState(i,n),o.reportStateChanged(i,n))}},r=function(e,t,n){var a={appDefinitionName:t||"",sectionId:n||""};e.reportBI(i.SDK_NAVIGATION_TO_SECTION_ERROR,a)},p=function(t,i,n,a,o,s,r){i.pageId===n?(t.updatePageNavInfo(i,a,o),s&&t.scrollSiteTo(0,0)):t.navigateToPage(i,a,o),e.isFunction(r)&&r()};return{addAppSectionParamsToNavInfo:o,navigateToSection:function(t,i,n,c,d,u,l,g,h){if(i){var f=void 0,m=void 0,v=void 0,y=void 0,I=!1,S=n.data||"",P=!0,A={};if(e.isObject(n.data)&&(P=e.get(n,"data.sectionIdentifier.shouldRefreshIframe",!0),S=e.get(n,"data.sectionIdentifier.state")||n.data.state||"",A=e.get(n,"data.sectionIdentifier.queryParams"),m=e.get(n,"data.sectionIdentifier.sectionId"),I=e.get(n,"data.sectionIdentifier.noTransition"),y=e.get(n.data,["sectionIdentifier","customizeTarget","pageBackground"])),e.isUndefined(c)||e.isEmpty(c))r(t,i.appDefinitionName,m),g({error:{message:'Page with app "'+i.appDefinitionName+'" was not found.'}});else{if(e.isUndefined(m))f=c[0].pageId,v=a.getMainSectionWidgetData(i);else{var T=e.find(c,{tpaPageId:m});if(e.isUndefined(T))return r(t,i.appDefinitionName,m),void g({error:{message:'App page with sectionId "'+m+'" was not found.'}});f=T.pageId,v=a.getWidgetDataByTpaPageId(i,m)}if(l(f))return r(t,i.appDefinitionName,m),void g({error:{message:"Can't navigate to a dynamic page. Please use the platform app API instead."}});var D=u(f);s(t,P,D,S,A);var C={pageId:f,tpaInnerRoute:S};o(A,C),I&&(C.transition="none"),y&&(function(t){if(!e.startsWith(t,"rgba"))return!1;var i=(t=e(t).replace("rgba","").replace("(","").replace(")","")).split(",");if(4!==i.length)return!1;if(!e.every(i.slice(0,3),function(e){var t=e>=0&&e<=255,i=parseFloat(e),n=!isNaN(i)&&i>0&&i<=100;return t||n}))return!1;var n=e.last(i);return!n||n>=0&&n<=1}(y)?C.pageBackgroundColorOverride=y:g({error:{message:'Color should be rgba but "'+y+'" is not rgba format.'}}));var w=void 0;e.isFunction(h)&&(w=e.partial(h,e.get(v,"widgetId"),D)),p(t,C,d,void 0,void 0,!0,w)}}else{var E=e.get(n,"data.sectionIdentifier.appDefinitionId");E?(r(t),g({error:{message:'Application with appDefinitionId "'+E+'" was not found on the site.'}})):(r(t),g({error:{message:"Component was not found."}}))}},navigateWithoutClosingPopupIfPossible:p,navigateToPage:function(i,a,o,s,r,p,c){var d=e.get(a,"data.pageId"),u=e.get(a,"data.noTransition"),l=e.get(a,"data.anchorId"),g=r(d);o===d?l&&n.navigateToAnchor(i,a,d,g,p,c):t.linkUtils.navigateToPage(i,d,s,u,void 0,function(){l&&n.navigateToAnchor(i,a,d,g,p,c)},c)}}}.apply(t,n))||(e.exports=a)},553:function(e,t,i){var n,a;n=[i(0),i(1),i(3)],void 0===(a=function(e,t,i){"use strict";var n=function(e){return{id:e.compId,title:e.name}},a=function(t,i){return e.map(i,n)};function o(t,i,n){var o=a(t,i);return e.some(o,{id:n})}return{getCurrentPageAnchors:function(e,t,i,n,o){o(a(i,n))},navigateToAnchor:function(e,t,n,a,s,r){var p=t.data.anchorId;if(p===i.siteConstants.PAGE_ANCHORS.TOP_ANCHOR_COMP_ID)e.scrollToAnchor(i.siteConstants.PAGE_ANCHORS.TOP_ANCHOR_ID);else if(p===i.siteConstants.PAGE_ANCHORS.BOTTOM_ANCHOR_COMP_ID)e.scrollToAnchor(i.siteConstants.PAGE_ANCHORS.BOTTOM_ANCHOR_ID);else if(o(n,a,p)){var c=s(p);c&&e.scrollToAnchor(c)}else r&&r({error:{message:'anchor with id "'+p+'" was not found on the current page.'}})},isAnchorExistsOnPage:o}}.apply(t,n))||(e.exports=a)},554:function(e,t,i){var n,a;n=[i(11),i(0),i(10)],void 0===(a=function(e,t,i){"use strict";var n=function(e){if(t.isString(e)){var i=parseInt(e,10);return t.isNaN(i)?0:i}return t.isNumber(e)?e:0},a=function(e){return t.get(e,"props.compData.tpaData")},o=function(e,n,o,s,r,p,c){var d=e.getComponentById(n);return{origCompId:n,applicationId:t.get(d,"props.compData.applicationId"),externalId:t.get(d,"props.compData.referenceId"),tpaData:a(d),url:o,width:s,height:r,theme:p,title:c,windowSize:{width:i(window).width(),height:i(window).height()}}};return{openModal:function(e,i,n,a,s,r,p,c){var d=function(e){return e.getSiteAspect("tpaModalAspect")}(e),u=function(e,i,n,a,s,r,p){var c=o(e,i,n,a,s,r,p);return t.omitBy(c,t.isUndefined)}(e,i,n,a,s,r,c);d.showModal(u,p)},openPopup:function(a,s,r,p,c,d,u,l,g){if(!function(e){return!t.includes(["wysiwyg.viewer.components.tpapps.TPAModal"],t.get(e,"props.structure.componentType"))}(a.getComponentById(s))){var h=new Error;throw h.name="Operation not supported",h.message="An app can not open a popup from a modal.",h}(function(e){return e.getSiteAspect("tpaPopupAspect")})(a).showPopup(function(a,s,r,p,c,d,u,l){var g=a.getComponentById(s),h=o(a,s,r,p,c,d),f=e.findDOMNode(g);if(f){h.origCompStyle=i(f).offset();var m=f.getBoundingClientRect();h.origCompStyle.actualTop=m.top,h.origCompStyle.actualLeft=m.left}return h.position=t.defaults(u||{},{origin:"FIXED",placement:"CENTER",x:0,y:0}),h.position.x=n(h.position.x),h.position.y=n(h.position.y),h.persistent=l,t.omitBy(h,t.isUndefined)}(a,s,r,p,c,d,u,l),g)}}}.apply(t,n))||(e.exports=a)},555:function(e,t,i){var n,a;n=[i(0),i(55),i(325),i(1)],void 0===(a=function(e,t,i,n){"use strict";var a={};return{sendBIEvent:function(o,s,r,p,c){var d=function(t,i){return t.widgetId=e.get(i,"widgetId"),t.appId=e.get(i,"applicationId"),t}(o,r);if(function(e,t){return t&&e.version&&e.type&&e.namespace}(d,r)){var u=e.get(r,"applicationId"),l={count:1,target:1};if(e.has(a,[u,o.type])?++(l=e.get(a,[u,o.type])).count:(a[u]||(a[u]={}),a[u][o.type]=l),l.count===l.target){var g={visitorUuid:t.getVisitorUuid(n),sdkVersion:d.version,origin:s,fnName:d.type,param:JSON.stringify(o.data),namespace:d.namespace,count:l.count};if(d.appId){var h=function(e,i){var n,a,o,s=t.getInstanceFromClientSpecMap(i,e.appId);if(!i[e.appId])throw new Error("app definition could not be found by the given appId");return{appId:i[e.appId].appDefinitionId,instanceId:s.instanceId,isPublished:(n=i[e.appId],a=e.widgetId,o=n.widgets[a],(o?o.published||o.santaEditorPublished:n.sectionPublished)?1:0)}}(d,p);e.merge(g,h)}c(d.appId?i.JS_SDK_FUNCTION_CALL:i.GALLERY_FUNCTION_CALL,g),l.target*=10}}}}}.apply(t,n))||(e.exports=a)},556:function(e,t,i){var n;void 0===(n=function(){"use strict";var e={"wysiwyg.viewer.skins.TPAModalSkin":{react:[["div","blockingLayer",[],{}],["div","dialog",[],{role:"dialog",tabIndex:0},["div","frameWrap",[],{},["iframe","iframe",[],{allowFullScreen:!0,frameBorder:0}],["div","errorMessage",[],{}],["button","xButton",[],{title:"Close modal","aria-label":"Close modal"}]]]],params:{rd:"BORDER_RADIUS","bg-block":"BG_COLOR"},paramsDefaults:{rd:"1px","bg-block":"#555"},paramsMutators:{"bg-block":{type:"alpha",value:.75}},css:{"%":"position:fixed;width:100%;height:100%;z-index:100000;","%blockingLayer":"background-color:[bg-block];position:fixed;top:0;right:0;bottom:0;left:0;width:100%;height:100%;overflow:hidden;z-index:999;",'%[data-state~="mobile"] %blockingLayer':"display:none;",'%[data-state~="mobile"] %dialog':"position:fixed;top:0;left:0;width:100%;height:100%;margin:0;","%dialog":"position:fixed;top:50%;left:50%;width:200px;height:200px;margin-top:-100px;margin-left:-100px;z-index:1000;","%frameWrap":"overflow:hidden;background:#fff;width:100%;height:100%;position:relative;z-index:1001;border:1px solid #e8e2e2;","%iframe":"position:absolute;width:100%;height:100%;[rd]","%xButton":"position:absolute;z-index:1002;margin-top:4px;right:9px;font-family:courier;font-size:24px;font-weight:bold;cursor:pointer;color:#a1a1a1;","%xButton:hover":"color:#373737;"}},"wysiwyg.viewer.skins.TPAPopupSkin":{react:[["div","frameWrap",[],{},["div","closeButton",[],{}],["iframe","iframe",[],{}]]],params:{shd:"BOX_SHADOW",rd:"BORDER_RADIUS",tdr:"URL"},paramsDefaults:{shd:"4px 4px 15px rgba(0, 0, 0, 0.4)",rd:"3px",tdr:"BASE_THEME_DIRECTORY"},css:{"%":"background:#fff;overflow:hidden;z-index:100000;[shd]  [rd]","%iframe":"position:absolute;width:100%;height:100%;z-index:1000;","%closeButton":"position:absolute;z-index:1001;top:10px;right:10px;cursor:pointer;background:transparent url([tdr]popup_close_x.png) no-repeat right top;height:24px;width:24px;"}},"wysiwyg.viewer.skins.TPAPreloaderSkin":{react:[["div","content",[],{},["div","preloader",[],{}],["span","loadingText",[],{}]]],css:{"%":"position:absolute;top:0;left:0;color:#373737;width:100%;height:100%;","%content":"width:100%;height:100%;"}},"wysiwyg.viewer.skins.TPASectionSkin":{react:[["iframe","iframe",[],{}],["div","overlay",[],{}]],exports:{preloaderOverlay:{skin:"wysiwyg.viewer.skins.TPAPreloaderSkin",styleGroup:"preloaderStyleGroup"},unavailableMessageOverlay:{skin:"wysiwyg.viewer.skins.TPAUnavailableMessageOverlaySkin",styleGroup:"tpaUnavailableMessageOverlaySkinStyleGroup"}},css:{"%iframe":"overflow:hidden;position:absolute;width:100%;height:100%;display:block;",'%[data-state~="iframeNotShown"] %iframe':"display:none;",'%[data-state~="iframeRenderedInvisible"] %iframe':"visibility:hidden;"}},"wysiwyg.viewer.skins.TPAUnavailableMessageOverlaySkin":{react:[["div","content",[],{},["div","iconContainer",[],{},["img","unavailableIcon",[],{}]],["div","textTitle",[],{}],["div","textContainer",[],{},["span","text",[],{}],["a","reloadButton",[],{}],["span","dismissButton",[],{},["a",null,[],{},"Dismiss"]]]]],css:{"%":"position:absolute;top:0;left:0;color:#373737;width:100%;height:100%;","%content":"width:100%;height:100%;background:rgba(255, 255, 255, 0.9);font-size:0;margin-top:5px;","%textContainer":'color:#373737;font-family:"Helvetica Neue", "HelveticaNeueW01-55Roma", "HelveticaNeueW02-55Roma", "HelveticaNeueW10-55Roma", Helvetica, Arial, sans-serif;font-size:14px;display:inline-block;vertical-align:middle;width:100%;margin-top:10px;text-align:center;',"%reloadButton":"display:inline-block;","% a":"color:#0099FF;text-decoration:underline;cursor:pointer;","%iconContainer":"display:none;","%dismissButton":"display:none;","%textTitle":'font-family:"Helvetica Neue", "HelveticaNeueW01-55Roma", "HelveticaNeueW02-55Roma", "HelveticaNeueW10-55Roma", Helvetica, Arial, sans-serif;display:none;','%[data-state~="hideIframe"] %_buttons':"opacity:1;",'%[data-state~="hideOverlay"]':"display:none;"}},"wysiwyg.viewer.skins.TPAWidgetNativeSkin":{react:[],css:{}},"wysiwyg.viewer.skins.TPAWidgetSkin":{react:[["iframe","iframe",[],{}],["div","overlay",[],{}]],exports:{preloaderOverlay:{skin:"wysiwyg.viewer.skins.TPAPreloaderSkin",styleGroup:"preloaderStyleGroup"},unavailableMessageOverlay:{skin:"wysiwyg.viewer.skins.TPAUnavailableMessageOverlaySkin",styleGroup:"tpaUnavailableMessageOverlaySkinStyleGroup"}},css:{"%":"overflow:hidden;","% iframe":"position:absolute;width:100%;height:100%;overflow:hidden;"}}};return e}.apply(t,[]))||(e.exports=n)},557:function(e,t,i){var n,a;n=[i(2)],void 0===(a=function(e){"use strict";return{propTypes:{compData:e.santaTypesDefinitions.Component.compData.isRequired},getOrigComponentId:function(){return this.props.compData.origCompId}}}.apply(t,n))||(e.exports=a)},6:function(e,t){e.exports=s},66:function(e,t){e.exports=y},7:function(e,t){e.exports=r},77:function(e,t,i){var n,a;n=[i(2),i(0),i(11),i(234)],void 0===(a=function(e,t,i,n){"use strict";return{propTypes:{id:e.santaTypesDefinitions.Component.id.isRequired,clientSpecMap:e.santaTypesDefinitions.RendererModel.clientSpecMap.isRequired,compData:e.santaTypesDefinitions.Component.compData.isRequired,isMobileView:e.santaTypesDefinitions.isMobileView,sendPostMessage:e.santaTypesDefinitions.TPA.sendPostMessage.isRequired,windowScrollEvent:e.santaTypesDefinitions.SiteAspects.windowScrollEvent.isRequired,windowKeyboardEvent:e.santaTypesDefinitions.SiteAspects.windowKeyboardEvent.isRequired,svSessionChangeEvent:e.santaTypesDefinitions.SiteAspects.svSessionChangeEvent.isRequired,deleteCompListeners:e.santaTypesDefinitions.TPA.deleteCompListeners.isRequired,siteMetadataChangeAspect:e.santaTypesDefinitions.SiteAspects.siteMetadataChangeAspect.isRequired,tpaPageNavigationAspect:e.santaTypesDefinitions.SiteAspects.tpaPageNavigationAspect.isRequired,dynamicClientSpecMapAspect:e.santaTypesDefinitions.SiteAspects.dynamicClientSpecMapAspect.isRequired,registerToMemberDetailsChange:e.santaTypesDefinitions.SiteMembersSantaTypes.registerToMemberDetailsChange.isRequired,unRegisterMemberDetailsChange:e.santaTypesDefinitions.SiteMembersSantaTypes.unRegisterMemberDetailsChange.isRequired},isEventSupported:function(e){return!!n[e]},isCompListensTo:function(e){return t.includes(this.state.registeredEvents,e)},getAppData:function(){return this.props.clientSpecMap[this.props.compData.applicationId]||{}},getDeviceType:function(){return this.props.isMobileView?"mobile":"desktop"},sendPostMessage:function(e){this.props.sendPostMessage(this,e)},getIframe:function(){return this.refs.iframe&&i.findDOMNode(this.refs.iframe)},startListen:function(e){if(this.isEventSupported(e)&&(this.setState({registeredEvents:this.state.registeredEvents.concat(e)}),this.props))switch(e){case n.PAGE_NAVIGATION:case n.PAGE_NAVIGATION_IN:case n.PAGE_NAVIGATION_OUT:case n.PAGE_NAVIGATION_CHANGE:this.props.tpaPageNavigationAspect.registerToPageChanged(this,e);break;case n.SCROLL:this.props.windowScrollEvent.registerToScroll(this);break;case n.SESSION_CHANGED:this.props.svSessionChangeEvent.registerToSessionChanged(this);break;case n.INSTANCE_CHANGED:this.props.dynamicClientSpecMapAspect.registerToInstanceChanged(this);break;case n.MEMBER_DETAILS_UPDATED:this.props.registerToMemberDetailsChange(this);break;case n.SITE_METADATA_CHANGED:this.props.siteMetadataChangeAspect.registerToSiteMetadataChange(this);break;case n.KEY_DOWN:this.props.windowKeyboardEvent.registerToKeyDown(this);break;case n.KEY_UP:this.props.windowKeyboardEvent.registerToKeyUp(this)}},stopListen:function(e){if(this.setState({registeredEvents:t.without(this.state.registeredEvents,e)}),this.props)switch(e){case n.PAGE_NAVIGATION:case n.PAGE_NAVIGATION_IN:case n.PAGE_NAVIGATION_OUT:case n.PAGE_NAVIGATION_CHANGE:this.props.tpaPageNavigationAspect.unregisterToPageChanged(this);break;case n.SCROLL:this.props.windowScrollEvent.unregisterToScroll(this,e);break;case n.SESSION_CHANGED:this.props.svSessionChangeEvent.unRegisterToSessionChanged(this);break;case n.INSTANCE_CHANGED:this.props.dynamicClientSpecMapAspect.unRegisterToInstanceChanged(this);break;case n.MEMBER_DETAILS_UPDATED:this.props.unRegisterMemberDetailsChange(this);break;case n.SITE_METADATA_CHANGED:this.props.siteMetadataChangeAspect.unRegisterToSiteMetadataChange(this);break;case n.KEY_DOWN:this.props.windowKeyboardEvent.unRegisterKeyDown(this);break;case n.KEY_UP:this.props.windowKeyboardEvent.unRegisterKeyUp(this)}},setSiteMemberDataState:function(e){this.setState({shouldGetSiteMemberDetails:e})},hasOrigComponent:function(){return!t.isUndefined(this.props.compData.origCompId)},componentWillUnmount:function(){var e=this.props.id,i=this.getAppData().appDefinitionId;this.props.deleteCompListeners(i,e),t.forEach(t.get(this.state,"registeredEvents",[]),function(e){this.stopListen(e)}.bind(this))}}}.apply(t,n))||(e.exports=a)},90:function(e,t,i){var n,a;n=[i(2),i(0),i(1),i(55),i(541),i(327)],void 0===(a=function(e,t,i,n,a,o){"use strict";var s=function(e,t){return e.mutateIframeUrlQueryParam&&(t=e.mutateIframeUrlQueryParam(t)),t};return{propTypes:{id:e.santaTypesDefinitions.Component.id.isRequired,isViewerMode:e.santaTypesDefinitions.isViewerMode,isGoogleBot:e.santaTypesDefinitions.isGoogleBot,componentViewMode:e.santaTypesDefinitions.RenderFlags.componentViewMode,languageCode:e.santaTypesDefinitions.RendererModel.languageCode,compData:e.santaTypesDefinitions.Component.compData.isRequired,getCurrentUrl:e.santaTypesDefinitions.getCurrentUrl.isRequired,rootId:e.santaTypesDefinitions.Component.rootId,viewerSessionId:e.santaTypesDefinitions.viewerSessionId,currentUrl:e.santaTypesDefinitions.currentUrl.isRequired,aspectData:e.santaTypesDefinitions.TPA.data,isExperimentOpen:e.santaTypesDefinitions.isExperimentOpen,currentLanguage:e.santaTypesDefinitions.RendererModel.multilingual.currentLanguage,originalLanguage:e.santaTypesDefinitions.RendererModel.multilingual.originalLanguage,currency:e.santaTypesDefinitions.RendererModel.currency,timeZone:e.santaTypesDefinitions.RendererModel.timeZone},getInitialState:function(){this.viewMode=this.getViewMode()},getViewMode:function(){return this.props.isViewerMode?"site":this.props.componentViewMode},buildUrl:function(e,r){e=function(e){if(this.props.isGoogleBot){var i=t.get(this,"props.compData.widgetId");if(n.isEcom(this)){if(this.props.isExperimentOpen("sv_tpaReplaceEcomEndpointForSeoV1")){if(i===n.Constants.ECOM.PRODUCT_PAGE_WIDGET_ID)return"https://www.quick-ecom.com/product/{instanceId}";if(!i||i===n.Constants.ECOM.GALLERY_WIDGET_ID||i===n.Constants.ECOM.GRID_GALLERY_WIDGET_ID)return"https://www.quick-ecom.com/gallery/{instanceId}/{compId}"}else if(this.props.isExperimentOpen("sv_tpaReplaceEcomEndpointForSeoV2")){if(i===n.Constants.ECOM.PRODUCT_PAGE_WIDGET_ID)return"https://{instanceId}.quick-ecom.com/product";if(!i||i===n.Constants.ECOM.GALLERY_WIDGET_ID||i===n.Constants.ECOM.GRID_GALLERY_WIDGET_ID)return"https://{instanceId}.quick-ecom.com/gallery/{compId}"}}else if(n.isBlog(this)&&this.props.isExperimentOpen("sv_tpaReplaceEcomEndpointForSeoV1")){if(i===n.Constants.SOCIAL_BLOG.CUSTOM_FEED_WIDGET_ID)return"https://social-blog.wixapps.net/custom-feed-widget/{instanceId}";if(!i||i===n.Constants.SOCIAL_BLOG.SOCIAL_BLOG_WIDGET_ID)return"https://social-blog.wixapps.net/{instanceId}"}}return e}.call(this,e);var p=this.props.getCurrentUrl()&&i.urlUtils.parseUrl(this.props.getCurrentUrl());e=n.appendProtocolToUrlIfNeeded(e,p);var c=this.getAppData(this),d=this.props.id;e=function(e,i,a){var o=e;if(t.includes(e,"{instanceId}")){var s=i.instanceId;s||(s=n.getInstanceFromAppData(i).instanceId),o=t.replace(o,new RegExp("{instanceId}","g"),s)}return t.includes(e,"{compId}")&&(o=t.replace(o,new RegExp("{compId}","g"),a)),o}(e,c,d);var u=this.state.initialHeight?this.state.initialHeight.toString():void 0,l=t.get(this.props,"currentLanguage.languageCode"),g=this.props.isViewerMode?t.get(this.props,"originalLanguage.languageCode"):t.get(this.props,"originalLanguage.code"),h=t.get(this.props,"currentLanguage.locale"),f=void 0;l&&g&&(f=g===l);var m,v,y,I=new a(e);if(this.props.isExperimentOpen("sv_tpaUrlWithNoQueryParams")&&this.props.isGoogleBot&&(m=this,v=t.get(m,"props.compData.widgetId"),y=t.isUndefined(v),n.isEcom(m)?y||t.includes([n.Constants.ECOM.PRODUCT_PAGE_WIDGET_ID,n.Constants.ECOM.GALLERY_WIDGET_ID,n.Constants.ECOM.GRID_GALLERY_WIDGET_ID],v):n.isBlog(m)?y||t.includes([n.Constants.SOCIAL_BLOG.SOCIAL_BLOG_WIDGET_ID,n.Constants.SOCIAL_BLOG.CUSTOM_FEED_WIDGET_ID],v):void 0)?I.addDeviceType(this.getDeviceType(this)).addCompId(d).addViewMode(this.viewMode).addStandalone("true"):I.addCompId(d).addDeviceType(this.getDeviceType(this)).addInstance(this.state.initialInstance).addLocale(this.props.languageCode).addViewMode(this.viewMode).addCacheKiller(n.getCacheKiller()).addExternalId(this.props.compData.referenceId).addPageId(this.props.rootId).addHeight(u).filterQueryParams(r).addMultipleQueryParams(function(){var e=t.get(this.props,"aspectData.queryParams",{});return e=t.merge(e,s(this,e)),e=t.merge(e,n.getDebuggingParamsFromUrl(this.props.currentUrl)),e=t.merge(e,this.state.sectionUrlParams),this.getEcomParams&&this.getEcomParams()&&(e["ecom-tpa-params"]=this.getEcomParams()),e}.call(this)).addViewerSessionId(this.props.viewerSessionId).addRouterData(this.state.initialRouterData,this.props.isExperimentOpen).addLang(l).addDateNumberFormat(h).addIsPrimaryLanguage(t.toString(f)).addCurrency(this.props.currency).addTimeZone(this.props.timeZone),this.props.isGoogleBot&&(this.props.isExperimentOpen("sv_tpaReplaceEcomEndpointForSeoV1")||this.props.isExperimentOpen("sv_tpaReplaceEcomEndpointForSeoV2"))&&this.props.tpaComponentsDomAspect){var S=this.props.tpaComponentsDomAspect.aspectSiteApi.getSiteAPI(),P=o.mapPageToWidgets(S),A=this.props.compData.applicationId;if(!t.isEmpty(P)&&P[A]){var T=P[A],D=t.find(T,{tpaPageId:"product_page"});if(D){var C=D.pageId,w=S.getPageUrlFor(C);I.addQueryParam("productPageUrl",w),I.addStandalone("true")}}}return this.mutateIframeSrc&&I.mutateIframeSrc(this.mutateIframeSrc),I.build()}}}.apply(t,n))||(e.exports=a)}})});
//# sourceMappingURL=tpa.min.js.map